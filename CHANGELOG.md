### Changelog

All notable changes to this project will be documented in this file. Dates are displayed in UTC.

Generated by [`auto-changelog`](https://github.com/CookPete/auto-changelog).

#### [v1.36.2](https://github.com/DEFRA/water-abstraction-service/compare/v1.34.0...v1.36.2)

> 25 February 2020

- Bug fix/import job allocations [`#809`](https://github.com/DEFRA/water-abstraction-service/pull/809)
- Adds missing default gen_random_uuid() to column water.licence_agreements.licence_agreement_id [`#804`](https://github.com/DEFRA/water-abstraction-service/pull/804)
- Use config.proxy for requests to charge module [`#800`](https://github.com/DEFRA/water-abstraction-service/pull/800)
- Use proxy for cognito requests [`#797`](https://github.com/DEFRA/water-abstraction-service/pull/797)
- Bugfix/water 2530 batch total [`#793`](https://github.com/DEFRA/water-abstraction-service/pull/793)
- Fixes issue with status of water.billing_batch_charge_version_years [`#789`](https://github.com/DEFRA/water-abstraction-service/pull/789)
- Feat/water 2511 bill run summary cm api [`#782`](https://github.com/DEFRA/water-abstraction-service/pull/782)
- Feat: Updates batch creation for better 409 response [`#786`](https://github.com/DEFRA/water-abstraction-service/pull/786)
- Chore: Update batch statuses [`#785`](https://github.com/DEFRA/water-abstraction-service/pull/785)
- Identify correct charge versions for Two Part Tariff [`#783`](https://github.com/DEFRA/water-abstraction-service/pull/783)
- Add start_date, expired_date, lapsed_date, revoked_date, suspend_from_billing [`#779`](https://github.com/DEFRA/water-abstraction-service/pull/779)
- Fix: Correct notification names in config file [`#780`](https://github.com/DEFRA/water-abstraction-service/pull/780)
- Feat: Adds batch approve, send and delete behaviour [`#777`](https://github.com/DEFRA/water-abstraction-service/pull/777)
- Feat/water 2500 handle supplementary hashes [`#765`](https://github.com/DEFRA/water-abstraction-service/pull/765)
- Randomise return invitation and reminder template [`#772`](https://github.com/DEFRA/water-abstraction-service/pull/772)
- Feat: Adds display name to regions [`#770`](https://github.com/DEFRA/water-abstraction-service/pull/770)
- Chore: Delete acceptance test batches [`#768`](https://github.com/DEFRA/water-abstraction-service/pull/768)
- Feat: Create transaction key on save [`#766`](https://github.com/DEFRA/water-abstraction-service/pull/766)
- Feat: Delete a batch [`#753`](https://github.com/DEFRA/water-abstraction-service/pull/753)
- Feat: Add field for transaction key [`#760`](https://github.com/DEFRA/water-abstraction-service/pull/760)
- Chore: Updates node version in .nvmrc [`#756`](https://github.com/DEFRA/water-abstraction-service/pull/756)
- Feat/WATER-2448 [`#754`](https://github.com/DEFRA/water-abstraction-service/pull/754)
- Chore: Use bookshelf repo for regions endpoint [`#758`](https://github.com/DEFRA/water-abstraction-service/pull/758)
- Add tests for billing batches repo [`#759`](https://github.com/DEFRA/water-abstraction-service/pull/759)
- Feat/water 2474 orm [`#750`](https://github.com/DEFRA/water-abstraction-service/pull/750)
- Feat/water 2475 agreements to cm [`#741`](https://github.com/DEFRA/water-abstraction-service/pull/741)
- Feat/water 2486 cm authentication [`#747`](https://github.com/DEFRA/water-abstraction-service/pull/747)
- Chore: Pre work for upgrading to Node v12 [`#746`](https://github.com/DEFRA/water-abstraction-service/pull/746)
- Add mapper to generate CM data from service models [`#727`](https://github.com/DEFRA/water-abstraction-service/pull/727)
- Feat: Adds endpoint to get batches [`#735`](https://github.com/DEFRA/water-abstraction-service/pull/735)
- Chore: Update connection pool distribution [`#742`](https://github.com/DEFRA/water-abstraction-service/pull/742)
- Fix: Correct scheduling of next job [`#739`](https://github.com/DEFRA/water-abstraction-service/pull/739)
- Feat: Remove customer from a bill run [`#731`](https://github.com/DEFRA/water-abstraction-service/pull/731)
- Compensation charges [`#722`](https://github.com/DEFRA/water-abstraction-service/pull/722)
- Fix: Removes old table name from query [`#726`](https://github.com/DEFRA/water-abstraction-service/pull/726)
- Feat: Capture region data for licences [`#724`](https://github.com/DEFRA/water-abstraction-service/pull/724)
- Feat/water 2438 map transactions to db row [`#719`](https://github.com/DEFRA/water-abstraction-service/pull/719)
- Feat/water 2438 map charges to models [`#710`](https://github.com/DEFRA/water-abstraction-service/pull/710)
- Feature/2436 graceful shutdown [`#711`](https://github.com/DEFRA/water-abstraction-service/pull/711)
- Adding models [`#707`](https://github.com/DEFRA/water-abstraction-service/pull/707)
- Use db.pool from water-abstraction-helpers [`#703`](https://github.com/DEFRA/water-abstraction-service/pull/703)
- Create Role model. Add roles to InvoiceLicence model. [`#704`](https://github.com/DEFRA/water-abstraction-service/pull/704)
- Remove db.query connector which swallowed errors [`#700`](https://github.com/DEFRA/water-abstraction-service/pull/700)
- Feat: Adds transactions to the invoice API [`#691`](https://github.com/DEFRA/water-abstraction-service/pull/691)
- Remove water.lookup table, scheduled job and API [`#699`](https://github.com/DEFRA/water-abstraction-service/pull/699)
- Add licence-level agreements to charge processor [`#688`](https://github.com/DEFRA/water-abstraction-service/pull/688)
- Bump aws-sdk from 2.589.0 to 2.590.0 [`#695`](https://github.com/DEFRA/water-abstraction-service/pull/695)
- Pre-digital service returns show incorrect return volumes in gallons [`#690`](https://github.com/DEFRA/water-abstraction-service/pull/690)
- Update dependencies [`#694`](https://github.com/DEFRA/water-abstraction-service/pull/694)
- Move all access to Notify client to single connector, and use whitelist key for email in non-production environments [`#693`](https://github.com/DEFRA/water-abstraction-service/pull/693)
- Feat/water 2324 [`#680`](https://github.com/DEFRA/water-abstraction-service/pull/680)
- Feat/water 2437 write billing invoice licences v2 [`#684`](https://github.com/DEFRA/water-abstraction-service/pull/684)
- Feat/water 2417 write billing invoices [`#675`](https://github.com/DEFRA/water-abstraction-service/pull/675)
- Fix: Returns notifications job completion [`#681`](https://github.com/DEFRA/water-abstraction-service/pull/681)
- Fix: Ensures LIC_NO is used as index in import schema [`#682`](https://github.com/DEFRA/water-abstraction-service/pull/682)
- Feat: Handle process charge version job completion [`#669`](https://github.com/DEFRA/water-abstraction-service/pull/669)
- Fix: Improves performance of some queries [`#678`](https://github.com/DEFRA/water-abstraction-service/pull/678)
- Add sample data. First tests with sample data [`2802aa1`](https://github.com/DEFRA/water-abstraction-service/commit/2802aa10ca0120fbb570dcf1818a73b7bc007953)
- Move all mapping code to 'mappers' directory [`94ad680`](https://github.com/DEFRA/water-abstraction-service/commit/94ad680c6355fecabc7851fe9616d1641a429718)
- Add final sample data. Further refactoring, remove redundant code. [`b035bcc`](https://github.com/DEFRA/water-abstraction-service/commit/b035bccc86dfb581db356a682d9e5946e49c139f)
- Removes unwanted package and update code climate [`3b6a52c`](https://github.com/DEFRA/water-abstraction-service/commit/3b6a52c208fdfebab56efd1d64b7fb2015bb9564)
- Fix tests in billing mappers/services [`66ef5a9`](https://github.com/DEFRA/water-abstraction-service/commit/66ef5a9fb5d06f087b8a4259e2952ce56ec81661)
- Add functionality to reallocate within charge element groups [`351cf3b`](https://github.com/DEFRA/water-abstraction-service/commit/351cf3b5df020cb88318356c9f568053b2df2ed9)
- PR feedback [`17601b0`](https://github.com/DEFRA/water-abstraction-service/commit/17601b0a65ee71c94bbf70b9c3ca001a821f04c0)
- Create transactions in CM [`dc42b71`](https://github.com/DEFRA/water-abstraction-service/commit/dc42b71c9c30427ece8f7af621a31ac9c1b4dc2e)
- Experiment with Bookshelf.js models [`8873d5c`](https://github.com/DEFRA/water-abstraction-service/commit/8873d5c92032a20f926a8367185a3af4e7a32fd8)
- Experiment with Bookshelf.js models [`b8cf2f8`](https://github.com/DEFRA/water-abstraction-service/commit/b8cf2f81acae97a6fc00d75d7c4a4cc1a0536cd2)
- Use invoice account companies not contacts in response [`472e912`](https://github.com/DEFRA/water-abstraction-service/commit/472e91209ec2af32182f4c898c7ed82d6ffda1ab)
- Add unit tests [`20d2e9c`](https://github.com/DEFRA/water-abstraction-service/commit/20d2e9c79cb4f834d1333c82852c5fbb24780afb)
- Further refactoring based on James' review [`e51c3d3`](https://github.com/DEFRA/water-abstraction-service/commit/e51c3d35196cced001da788f8cccb064dbee7fa8)
- Move all remaining model mapping in charge-processor to services directory [`9d9a10c`](https://github.com/DEFRA/water-abstraction-service/commit/9d9a10c154f6600176d559d6ae70ae8a0a2b1ca3)
- Add tests for create charge job [`eb45836`](https://github.com/DEFRA/water-abstraction-service/commit/eb45836a7a6e92d82f66ff4aacdaf50a9e462817)
- Additional tests [`24649f6`](https://github.com/DEFRA/water-abstraction-service/commit/24649f6a263a61a3aaaa5478d5343642026c9a7d)
- Stricter model validation.  Write transactions to DB table [`ff13b75`](https://github.com/DEFRA/water-abstraction-service/commit/ff13b75d370d3d789cffe3975c4584e9ca301329)
- Refactoring functions to reduce complexity [`1c86843`](https://github.com/DEFRA/water-abstraction-service/commit/1c86843bdef246c52816a09c4d206e546b8aa7f6)
- Use Bookshelf models to load transaction models [`6a66d54`](https://github.com/DEFRA/water-abstraction-service/commit/6a66d54a01db4c475b353d22ccee8cd7cb999573)
- Add test for transaction service [`29076e9`](https://github.com/DEFRA/water-abstraction-service/commit/29076e9d2359b23d0bddd506ae13f531bb6e6b54)
- Updates the transaction hash to include is TPT [`b242434`](https://github.com/DEFRA/water-abstraction-service/commit/b2424348847fe3a9c07e5f2b400fbeb11635b8b9)
- Add test for mapping transaction to DB row [`b21de26`](https://github.com/DEFRA/water-abstraction-service/commit/b21de261961f1c81f8f43f24b0b26e0b6493db73)
- Additional tests [`f45eeef`](https://github.com/DEFRA/water-abstraction-service/commit/f45eeef78e909c46b5c34e86dcdf56a9ee59cced)
- Additional tests for charge elements repo/service [`3a20e88`](https://github.com/DEFRA/water-abstraction-service/commit/3a20e88915d12e54379ec2dac02830a265719062)
- Add tests for licence service [`e484fc7`](https://github.com/DEFRA/water-abstraction-service/commit/e484fc72c9974524a3f1444902079672c4d36a2e)
- Fixes issue where historic (NALD) returns were shown with incorrect units/conversion [`47b03ec`](https://github.com/DEFRA/water-abstraction-service/commit/47b03ec1ec3b239002b609f6b5e20b1beda55237)
- Move CRM address mapping to own service [`cb570d0`](https://github.com/DEFRA/water-abstraction-service/commit/cb570d0bf4dc0e77b916cfdebf53faca65d7449d)
- Change reshuffling approach. Change Decimal precision to 20. [`665573c`](https://github.com/DEFRA/water-abstraction-service/commit/665573cde13d15dd87b6444ca808d0d748dfb72c)
- Additional bookshelf models [`4e83dbd`](https://github.com/DEFRA/water-abstraction-service/commit/4e83dbd246ad95244d9b506aa02dd77b04c78c85)
- Additional bookshelf models [`3dae78f`](https://github.com/DEFRA/water-abstraction-service/commit/3dae78ff4bcbaf0d23fb93762721d3b2a6732523)
- Maps and persists Transaction instance to DB row [`56044be`](https://github.com/DEFRA/water-abstraction-service/commit/56044bea3291ed35fc57054575799a5ea2c833e4)
- Fix broken tests [`ebaf159`](https://github.com/DEFRA/water-abstraction-service/commit/ebaf159252127ce6573eef0e36c8d94f8bde81d4)
- Add new notify templates to config. [`399e84d`](https://github.com/DEFRA/water-abstraction-service/commit/399e84d2dd6489d44344dccf85d6d8f7a90209ad)
- Refactor reshuffle-quantities [`e367a66`](https://github.com/DEFRA/water-abstraction-service/commit/e367a6691cd004d263ee5eec10049268bfcfab49)
- Moving company/contact mapper from charge-processor [`efea23c`](https://github.com/DEFRA/water-abstraction-service/commit/efea23c673f3e5a9566dd386f2718e93470f04ec)
- Add tests for BillingTransactionRepository [`5e43eb8`](https://github.com/DEFRA/water-abstraction-service/commit/5e43eb812c335a5741e63438ea5e6245c7de9a43)
- Fix: Update process for getting pending imports [`ba6ff06`](https://github.com/DEFRA/water-abstraction-service/commit/ba6ff064ca1bd4f82b6f1d13b18a033500fc4bf9)
- Add test for BillingInvoiceLicenceRepository [`a1246e4`](https://github.com/DEFRA/water-abstraction-service/commit/a1246e4407298c7248f68e38c634dbba0259804d)
- Fix remaining tests [`4c3d8ae`](https://github.com/DEFRA/water-abstraction-service/commit/4c3d8ae94d2214a2c5de9b2ce0171d9817fc1bf9)
- Fix weekly return test data issue [`d072c98`](https://github.com/DEFRA/water-abstraction-service/commit/d072c9878fcc49a80d39634ad9ee9bdeeab82c58)
- Feat: More graceful shutdown [`426fe4e`](https://github.com/DEFRA/water-abstraction-service/commit/426fe4e6dd779252ff0b81c36c0dd72f4aef2793)
- Add additional tests in transaction service [`de7321c`](https://github.com/DEFRA/water-abstraction-service/commit/de7321cb3cc83daeabf9c931b079cace7845fdc2)
- Moving mappers to /services folder [`c72e5b6`](https://github.com/DEFRA/water-abstraction-service/commit/c72e5b6bcf5fa350eea3ec5786ebcf03d90b6d13)
- Add tests to invoice service [`e694828`](https://github.com/DEFRA/water-abstraction-service/commit/e69482833c35b574b5d026a2ca02b65e3687ad9f)
- Add tests for charge module connector [`6d7741d`](https://github.com/DEFRA/water-abstraction-service/commit/6d7741d26bad11a16b0dead847f4e93fcb1813d6)
- Move map/persistence of Invoice to invoice-service.js [`33d503d`](https://github.com/DEFRA/water-abstraction-service/commit/33d503d7cffe92ec2697cbf1464ef2e6c8fd2609)
- Reduce function length of mapToChargeModuleTransaction for CodeClimate [`b37e4c1`](https://github.com/DEFRA/water-abstraction-service/commit/b37e4c1e3b6d5f6d1d87c28845d4f399a8510e3a)
- Additional test for billing controller supplementary batch year range [`433f837`](https://github.com/DEFRA/water-abstraction-service/commit/433f8375a6615973b02a346800ca00ca2ecb1c1e)
- Add test for saving transaction row [`bc0002d`](https://github.com/DEFRA/water-abstraction-service/commit/bc0002d9b06b4be0623e89f31be6538a578038fc)
- Updates dependencies [`b13dee0`](https://github.com/DEFRA/water-abstraction-service/commit/b13dee0c9ef4c59bb942164b151b91b87508969e)
- Add isCompensationCharge to transaction hash [`4ca23ae`](https://github.com/DEFRA/water-abstraction-service/commit/4ca23ae8f0775d8ba9030cdce868437d47435b9e)
- Add test for creation of transactions in invoice licence [`aad4b26`](https://github.com/DEFRA/water-abstraction-service/commit/aad4b2648b9910ba42eaf08c1d1428d179f05238)
- Add additional test for service return with no version [`e86fa3d`](https://github.com/DEFRA/water-abstraction-service/commit/e86fa3d5cb17f05fcf21d3dfa1f41f1f309289a5)
- Fix: Reallocate database connections [`55397b7`](https://github.com/DEFRA/water-abstraction-service/commit/55397b73409d615c3bc683da0466a6134b0b97ee)
- Move two part tariff files into correct folder [`1a5032a`](https://github.com/DEFRA/water-abstraction-service/commit/1a5032afd9c0666145111ede66c9cea7882b5abf)
- Move two-part-tariff files to billing module folder [`5e5e5f0`](https://github.com/DEFRA/water-abstraction-service/commit/5e5e5f03c1513bcd24fc6015790591d1711942a2)
- Further refactor checkForReturnsErrors function [`3ee7884`](https://github.com/DEFRA/water-abstraction-service/commit/3ee7884f1a799b89eb951aa1507c5ac1fbb30b23)
- Suggested changes from code review [`bbc7861`](https://github.com/DEFRA/water-abstraction-service/commit/bbc7861af307595c054402acb3a68c9aa5d32d3b)
- Revert to not using public schema for uuid_generate_v4 - for travis migrations to run [`128d18c`](https://github.com/DEFRA/water-abstraction-service/commit/128d18c4996fe55d141d481da313000070690920)
- Move licenceHolder role to role model file [`e60d772`](https://github.com/DEFRA/water-abstraction-service/commit/e60d772790fa1f66fc8060049fbe6ae8a4e45a7c)
- Add transactions to InvoiceLicences in batch [`edb09c9`](https://github.com/DEFRA/water-abstraction-service/commit/edb09c96eb9863ae6da6320c8bbb1f3bc73aa39f)
- Add randomisation of return letters [`b16648b`](https://github.com/DEFRA/water-abstraction-service/commit/b16648b3f177d3eaf9038d9af0767793aa42ebda)
- Fix issue with dummy licence data where licence had expired in 2020 [`0b24679`](https://github.com/DEFRA/water-abstraction-service/commit/0b24679f329037caa7df19133b7c2a49e46a7b5c)
- Alter codeclimate to allow more methods [`6e8db1f`](https://github.com/DEFRA/water-abstraction-service/commit/6e8db1f506503a58b4b76ae3bdd403006b1aeec5)
- Remove references to proRataBillableQuantity [`72ab797`](https://github.com/DEFRA/water-abstraction-service/commit/72ab7974e15a7ce08b1c53fe70ccea60bbed4c9e)
- Add test for role.contact is undefined [`e743176`](https://github.com/DEFRA/water-abstraction-service/commit/e743176c04e9158181d453f489068fb06c1c4cdb)
- Move npm from "dependencies" to "engines" in package.json [`d2b0a8d`](https://github.com/DEFRA/water-abstraction-service/commit/d2b0a8df7657e9c46bae38ad5073690361293b2f)
- Remove the region from the water.licences unique index [`02f01d6`](https://github.com/DEFRA/water-abstraction-service/commit/02f01d629b9d25af1d7e35a7e0b9a68d472b37f5)
- Bugfix with transaction mapping [`06b4888`](https://github.com/DEFRA/water-abstraction-service/commit/06b4888eb96c52f1e6001a49eb4556ed8ec93216)
- Fix linter error [`0c36dfe`](https://github.com/DEFRA/water-abstraction-service/commit/0c36dfe77c7dc062fe1e4ccfe338b11b7bd88305)
- Fix linter error [`d6c81dd`](https://github.com/DEFRA/water-abstraction-service/commit/d6c81dd38028861bf1941cb0cbcf172765274a20)

#### [v1.34.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.33.0...v1.34.0)

> 26 November 2019

- Chore: Correct pluralisation of job files [`#667`](https://github.com/DEFRA/water-abstraction-service/pull/667)
- Feat: Populates charge version years [`#659`](https://github.com/DEFRA/water-abstraction-service/pull/659)
- Feat: Find charge versions for supplementary billing [`#648`](https://github.com/DEFRA/water-abstraction-service/pull/648)
- Fixes pg-boss 3.x issues in import [`#654`](https://github.com/DEFRA/water-abstraction-service/pull/654)
- Reverts to using hapi plugin approach to register PG boss subscribers [`#653`](https://github.com/DEFRA/water-abstraction-service/pull/653)
- Feature/2403 batch financial year range [`#650`](https://github.com/DEFRA/water-abstraction-service/pull/650)
- Modify billing code to use new PG boss plugin [`#652`](https://github.com/DEFRA/water-abstraction-service/pull/652)
- Adds PG boss to hapi as a plugin, upgrades PG boss to 3.x [`#651`](https://github.com/DEFRA/water-abstraction-service/pull/651)
- Feat: Create APIs to surface batch data [`#649`](https://github.com/DEFRA/water-abstraction-service/pull/649)
- Only create valid charge version years [`fbf420b`](https://github.com/DEFRA/water-abstraction-service/commit/fbf420bf6a2a8c37703217ca7236a92e883a86f9)
- Makes formal use of end of financial year [`d017596`](https://github.com/DEFRA/water-abstraction-service/commit/d0175968494c04e39f256c3d70ac7e583cbbc870)
- Removes redundant file [`3ae56df`](https://github.com/DEFRA/water-abstraction-service/commit/3ae56df429310f33c02931002493b97145b415dc)
- Security updates [`6a69ed6`](https://github.com/DEFRA/water-abstraction-service/commit/6a69ed635975b70d9bc823dc00f95988e13fcf88)
- Remove handlebars [`1fdde57`](https://github.com/DEFRA/water-abstraction-service/commit/1fdde573a9b660e92ac12d99ffd93d339b8b6132)
- Simplifies the status values [`0a941f4`](https://github.com/DEFRA/water-abstraction-service/commit/0a941f499dd6359316eba3bd30d4b5c060f8b8c3)
- Remove routes from codeclimate tests [`4134e0e`](https://github.com/DEFRA/water-abstraction-service/commit/4134e0e84dff7bd58177137ae49b665973170e88)

#### [v1.33.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.32.0...v1.33.0)

> 13 November 2019

- Bugfix/water 2399 [`#641`](https://github.com/DEFRA/water-abstraction-service/pull/641)
- Feat: Adds resource to create a billing batch [`#638`](https://github.com/DEFRA/water-abstraction-service/pull/638)
- Feat: Adds new tables for billing [`#634`](https://github.com/DEFRA/water-abstraction-service/pull/634)
- Feat: Adds regions data to water service [`#632`](https://github.com/DEFRA/water-abstraction-service/pull/632)
- Sets up database tables to hold licence agreements [`#628`](https://github.com/DEFRA/water-abstraction-service/pull/628)
- bugfix/WATER-2399 [`8ad48d5`](https://github.com/DEFRA/water-abstraction-service/commit/8ad48d5323a6875428a37828008d2fce47455d48)
- Stop Slack/scheduled jobs running on Travis [`47a1fcf`](https://github.com/DEFRA/water-abstraction-service/commit/47a1fcfef310ff680b1fb756c123af751eac9035)

#### [v1.32.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.31.0...v1.32.0)

> 30 October 2019

- Chore: Allow creating of internal users for testing [`#627`](https://github.com/DEFRA/water-abstraction-service/pull/627)
- Chore: Add some tests for test data generation [`dd86fbc`](https://github.com/DEFRA/water-abstraction-service/commit/dd86fbc23bf11011b39401a2329438864d2503e5)
- Chore: Add test agents for acceptance tests [`d1d2e8e`](https://github.com/DEFRA/water-abstraction-service/commit/d1d2e8ee623471524238172ce5c753e2d464a4a2)

#### [v1.31.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.30.0...v1.31.0)

> 15 October 2019

- Feat: Adds acceptance test setup and tear down resources [`#622`](https://github.com/DEFRA/water-abstraction-service/pull/622)

#### [v1.30.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.29.0...v1.30.0)

> 7 October 2019

- Removes old returns reminder notification, adds one with same logic a… [`#600`](https://github.com/DEFRA/water-abstraction-service/pull/600)
- Add isFinal flag to return metadata. [`#601`](https://github.com/DEFRA/water-abstraction-service/pull/601)
- Remove scheduled renewal email notification [`#602`](https://github.com/DEFRA/water-abstraction-service/pull/602)
- When sending returns invitations, only contact returns agent(s) via email if they exist [`#595`](https://github.com/DEFRA/water-abstraction-service/pull/595)
- Add template IDs for return notifications [`#591`](https://github.com/DEFRA/water-abstraction-service/pull/591)
- Add EIUC source to charge version API [`#588`](https://github.com/DEFRA/water-abstraction-service/pull/588)
- Initial work on returns notification updates [`#586`](https://github.com/DEFRA/water-abstraction-service/pull/586)
- Fix: Adds missing derogation clause [`#582`](https://github.com/DEFRA/water-abstraction-service/pull/582)
- Fix: Only create contacts for non null version [`#577`](https://github.com/DEFRA/water-abstraction-service/pull/577)
- Add endpoint to get company details by documentId [`#576`](https://github.com/DEFRA/water-abstraction-service/pull/576)
- Add tests for createNotificationData [`3f55978`](https://github.com/DEFRA/water-abstraction-service/commit/3f5597805d905a8edc5b66443cf5e44e7a1aeb27)
- Additional tests [`b27d5e5`](https://github.com/DEFRA/water-abstraction-service/commit/b27d5e5097e172f69c66159612efbb88b445bc14)
- Add test for CRM contact list to water contact model list factory [`2c39066`](https://github.com/DEFRA/water-abstraction-service/commit/2c3906605d954ff608fabd539b4868c69fddaf54)
- Add tests for building list of contacts for returns notification [`6f57e78`](https://github.com/DEFRA/water-abstraction-service/commit/6f57e780edd3c15748ddf41043089c78069e227c)
- Add tests for getRecipientList [`a4496eb`](https://github.com/DEFRA/water-abstraction-service/commit/a4496eb92fc2b0a2afbcfcea758ce32840daa3a7)
- fix return invitation tests [`fb9e78d`](https://github.com/DEFRA/water-abstraction-service/commit/fb9e78d2f16f0dc47e532c743d070271b8538760)
- Further tests [`ad9ec92`](https://github.com/DEFRA/water-abstraction-service/commit/ad9ec92d60e303c6621bf08f7edb8eddd23cb36b)
- Fix linter error [`62ffdcc`](https://github.com/DEFRA/water-abstraction-service/commit/62ffdccee6222c6e1d96d2bd106897e5f9e22329)

#### [v1.29.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.28.0...v1.29.0)

> 4 September 2019

- Feat: Return charge versions for expired licences [`#572`](https://github.com/DEFRA/water-abstraction-service/pull/572)
- Feat: Unlink Licence [`#569`](https://github.com/DEFRA/water-abstraction-service/pull/569)
- Add financial agreement types tables [`#571`](https://github.com/DEFRA/water-abstraction-service/pull/571)
- Feat: Include purpose description in charge versions [`#564`](https://github.com/DEFRA/water-abstraction-service/pull/564)
- Add disabled account user data when getting user status. [`#562`](https://github.com/DEFRA/water-abstraction-service/pull/562)
- Initial work on charge version API [`#559`](https://github.com/DEFRA/water-abstraction-service/pull/559)
- Add check for rowCount with conditional actions based on value. [`d9e9c2b`](https://github.com/DEFRA/water-abstraction-service/commit/d9e9c2be228a4e78256c18850930bcba916697df)
- Remove unlinkLicence function from documents connector [`80d3488`](https://github.com/DEFRA/water-abstraction-service/commit/80d3488ebe429e8d0aeba1f4b18bd1fedff46451)

#### [v1.28.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.27.0...v1.28.0)

> 22 August 2019

- Update internal user check [`#558`](https://github.com/DEFRA/water-abstraction-service/pull/558)
- Add routes for patch/delete internal user.  Amend post user to handle… [`#556`](https://github.com/DEFRA/water-abstraction-service/pull/556)
- Add charge agreements table [`#552`](https://github.com/DEFRA/water-abstraction-service/pull/552)
- Create tables for charge versions/elements [`#551`](https://github.com/DEFRA/water-abstraction-service/pull/551)
- Feat/water 2243 update email address [`#542`](https://github.com/DEFRA/water-abstraction-service/pull/542)
- Feat: Adds add internal endpoint [`#537`](https://github.com/DEFRA/water-abstraction-service/pull/537)
- Feat: Change email functionality [`#521`](https://github.com/DEFRA/water-abstraction-service/pull/521)
- Chore/2169 add test for status endpoint [`#527`](https://github.com/DEFRA/water-abstraction-service/pull/527)
- Update dependencies [`6ef51d8`](https://github.com/DEFRA/water-abstraction-service/commit/6ef51d8a392c9300acbe020035a5214450bf6db7)
- Additional work on update email flow [`e0f1237`](https://github.com/DEFRA/water-abstraction-service/commit/e0f12379ddb18e73e17b6a49748ba5d774a12f4d)
- Refactor. Add tests. [`12f009d`](https://github.com/DEFRA/water-abstraction-service/commit/12f009df815e2e05c87f1d9bc37c6f3ae6037ce5)
- Refactor. Add tests. [`2f177ab`](https://github.com/DEFRA/water-abstraction-service/commit/2f177ab48956f42ada918a27c084f9e60cc1c67a)
- Add routes for patch/delete internal user.  Amend post user to handle disabled user accounts [`768c740`](https://github.com/DEFRA/water-abstraction-service/commit/768c7409d0ee7b660464c58f069940e6d2316d00)
- Remove API calls from controller. Make return objects consistent. [`10c7684`](https://github.com/DEFRA/water-abstraction-service/commit/10c7684b239bf07de3a075278351802c7f2d0cc5)
- Add tests for an existing but disabled user account [`4491947`](https://github.com/DEFRA/water-abstraction-service/commit/4491947efad35b1b5ab7684c13ba4be1a8f05bc6)
- Add tests for patch method [`2846b7d`](https://github.com/DEFRA/water-abstraction-service/commit/2846b7d3dbd357e7fd76266baa98cfb912fd9b94)
- Add tests for delete call [`501ef1d`](https://github.com/DEFRA/water-abstraction-service/commit/501ef1d8d3eb5e25c8d0907bfd0638d0b290ec94)
- Refactor. Add tests. [`e1d2eb0`](https://github.com/DEFRA/water-abstraction-service/commit/e1d2eb0ca3bf18a1e866f1986358594db8a9ac04)
- Add IDM connector tests [`97cdb36`](https://github.com/DEFRA/water-abstraction-service/commit/97cdb36704028ded704a3163b2fdd1d6cca4db23)
- Fix tests. [`2cfb450`](https://github.com/DEFRA/water-abstraction-service/commit/2cfb450a291c3c97d04d69c84f404cf08a5f4046)
- Make code and terminology consistent with IDM code. [`0642ed4`](https://github.com/DEFRA/water-abstraction-service/commit/0642ed4019248c2f9d48400e412218fed3eed365)
- Chore: Adds test for /status endpoint [`7d38ea5`](https://github.com/DEFRA/water-abstraction-service/commit/7d38ea59133d772ee1e0edaa79db9bbeeef0acc9)
- Fix issue with re-enabling disabled users.  Only send new user email on account creation.  Adjust PATCH endpoint to include user ID. [`699c97a`](https://github.com/DEFRA/water-abstraction-service/commit/699c97aef6d59e5eef9125a82af94b09e43a5c02)
- Update reference to service uri in idm connector tests. [`8798bce`](https://github.com/DEFRA/water-abstraction-service/commit/8798bce1147df134f37b21ff2134f448fcee620c)
- Config tweak [`9032af1`](https://github.com/DEFRA/water-abstraction-service/commit/9032af1cf7ecb38fad17541661f9f3dc91dde571)
- Fix tests. [`64b4428`](https://github.com/DEFRA/water-abstraction-service/commit/64b4428a8b207b536db187a9033ecd130edfdd4a)
- Updated internal user checks to use application in config [`461388e`](https://github.com/DEFRA/water-abstraction-service/commit/461388e2962bf8e2c04d8b97fbb98b86afbfa05c)
- Fixed sign in link url. [`a1057df`](https://github.com/DEFRA/water-abstraction-service/commit/a1057df3d7f70c61f9ad177be64040515da49b43)
- Remove redundant code, replace with existing method [`d8f40d3`](https://github.com/DEFRA/water-abstraction-service/commit/d8f40d3363eb95095e93c9adbdfc9529df22a4ce)
- Update internal user check in users controller. [`0e02506`](https://github.com/DEFRA/water-abstraction-service/commit/0e02506164a19ee54b4b94bf2e5f8c8db59f6f8a)
- Remove accidental test.only [`4aa396d`](https://github.com/DEFRA/water-abstraction-service/commit/4aa396d28ec9a7bf49012c9a7e0237a16df6a0cf)
- Fix issue with migrations [`5e3d29c`](https://github.com/DEFRA/water-abstraction-service/commit/5e3d29c32a7f1246dc1c15c0a78369e18de2c15c)
- Merge tag 'charging-sprint-1' into develop [`97ece94`](https://github.com/DEFRA/water-abstraction-service/commit/97ece9497b06dcb085614c0c0057bfbbd9b7e1a4)
- Fix Joi validation in routes [`3bc3b11`](https://github.com/DEFRA/water-abstraction-service/commit/3bc3b114859666727d4797c60143e6e29264485e)
- Fix test [`c0bcc4d`](https://github.com/DEFRA/water-abstraction-service/commit/c0bcc4de10365c9632a795a75f5ecb598662ed88)
- Fixed sign in link url. [`8713047`](https://github.com/DEFRA/water-abstraction-service/commit/87130479d94c1837b53d75366c7b73f988b2a0db)
- Fix test [`18e9717`](https://github.com/DEFRA/water-abstraction-service/commit/18e9717783232ac3b9af9f833f67c65e84a9c63b)
- Fixed sign in link url. [`65f72b7`](https://github.com/DEFRA/water-abstraction-service/commit/65f72b7be50941d9909d84e5e77be983938c3add)
- Fix test [`273b867`](https://github.com/DEFRA/water-abstraction-service/commit/273b8672e79cce419ee8dde548eb36da10a173e6)

#### [v1.27.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.25.4...v1.27.0)

> 24 July 2019

- Feat: Adds service status endpoint [`#495`](https://github.com/DEFRA/water-abstraction-service/pull/495)
- Fix: Loosens csv schema validation [`#516`](https://github.com/DEFRA/water-abstraction-service/pull/516)
- Fix: Prevent email status check time getting to large [`#514`](https://github.com/DEFRA/water-abstraction-service/pull/514)
- Fixes issue where IDM users client returned all users if externalIds … [`#505`](https://github.com/DEFRA/water-abstraction-service/pull/505)
- Refactor. Add tests. [`fedb5d4`](https://github.com/DEFRA/water-abstraction-service/commit/fedb5d4d7719ad91e3bd21f98c9d53e8264fb149)
- Feat: Change email functionality [`701c3c3`](https://github.com/DEFRA/water-abstraction-service/commit/701c3c3017a51c05ddffa1f2e13fe2143f17ff18)
- Fix: Updates means of determining return frequency [`f739e91`](https://github.com/DEFRA/water-abstraction-service/commit/f739e91d0b443223eb3705732bc0d988a10b269d)
- Fixed sign in link url. [`d608810`](https://github.com/DEFRA/water-abstraction-service/commit/d60881039daa75bef40641cecc8ff14b82692509)
- Merge tag 'sprint-42' into develop [`ab179fe`](https://github.com/DEFRA/water-abstraction-service/commit/ab179fe2900e4f2a8cb9b0666a0b3a8f1363f523)
- Upgrade puppeteer to 1.18.1 [`cdc59c4`](https://github.com/DEFRA/water-abstraction-service/commit/cdc59c4e0c272ed6f30401154d7d614e28279fd2)
- Merge tag 'puppeteer-version' into develop [`90d24d5`](https://github.com/DEFRA/water-abstraction-service/commit/90d24d5ae27b51ea2a3ed546c35118fcde46a570)

#### [v1.26.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.25.3...v1.26.0)

> 9 July 2019

- Fix: Updates means of determining return frequency [`#498`](https://github.com/DEFRA/water-abstraction-service/pull/498)
- Merge tag 'internal-expired-licence' into develop [`f833a48`](https://github.com/DEFRA/water-abstraction-service/commit/f833a4861358dcd540c1187073b64b864b4245cf)

#### [v1.25.4](https://github.com/DEFRA/water-abstraction-service/compare/v1.26.0...v1.25.4)

> 11 July 2019

- Upgrade puppeteer to 1.18.1 [`e5472bf`](https://github.com/DEFRA/water-abstraction-service/commit/e5472bff4d3e00d4cfae63387f9d0140f1987757)

#### [v1.25.3](https://github.com/DEFRA/water-abstraction-service/compare/v1.25.2...v1.25.3)

> 4 July 2019

- Fixes issue where IDM users client returned all users if externalIds … [`#505`](https://github.com/DEFRA/water-abstraction-service/pull/505)
- Add includeExpired query param to documents routes to make them compatible with UI [`7309801`](https://github.com/DEFRA/water-abstraction-service/commit/7309801dd78ea84d517c1a165bf22cb493f93120)
- Merge tag 'returns-reminder-csv' into develop [`b265550`](https://github.com/DEFRA/water-abstraction-service/commit/b26555020aaae80c7d2170325c945d49db940a1c)

#### [v1.25.2](https://github.com/DEFRA/water-abstraction-service/compare/v1.25.1...v1.25.2)

> 3 July 2019

- Upgrade hapi-pg-rest-api to v5 [`6a3b236`](https://github.com/DEFRA/water-abstraction-service/commit/6a3b23642bd7b95918fd1b974039b4f9ba377a4a)

#### [v1.25.1](https://github.com/DEFRA/water-abstraction-service/compare/v1.25.0...v1.25.1)

> 2 July 2019

- For getCurrentDueReturns service call, filter client side when licences are excluded [`#500`](https://github.com/DEFRA/water-abstraction-service/pull/500)
- For getCurrentDueReturns service call, filter client side when licences are excluded [`#500`](https://github.com/DEFRA/water-abstraction-service/pull/500)

#### [v1.25.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.24.0...v1.25.0)

> 27 June 2019

- Bugfix/water 2157 scheduled renewal email [`#484`](https://github.com/DEFRA/water-abstraction-service/pull/484)
- Bugfix/water 2157 scheduled renewal email [`#482`](https://github.com/DEFRA/water-abstraction-service/pull/482)
- Bugfix/water 2157 scheduled renewal email [`#484`](https://github.com/DEFRA/water-abstraction-service/pull/484)
- Bugfix/water 2157 scheduled renewal email [`#482`](https://github.com/DEFRA/water-abstraction-service/pull/482)
- Feat/water 1795 [`#475`](https://github.com/DEFRA/water-abstraction-service/pull/475)
- Fix: Fixes issues with chunked void returns [`#480`](https://github.com/DEFRA/water-abstraction-service/pull/480)
- Set end date in permit repo correctly on import to minimum of expired/lapsed/revoked date [`#478`](https://github.com/DEFRA/water-abstraction-service/pull/478)
- Fix: Update next check dates for notify status checks [`#477`](https://github.com/DEFRA/water-abstraction-service/pull/477)
- Consumes the void-returns using a PATCH [`97d6802`](https://github.com/DEFRA/water-abstraction-service/commit/97d68028bcb11aa2067c8d500937d8938f1093c5)

#### [v1.24.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.23.0...v1.24.0)

> 12 June 2019

- Ignore empty returns in CSV [`#474`](https://github.com/DEFRA/water-abstraction-service/pull/474)
- Adjust sessions API for catbox REST API interface [`#462`](https://github.com/DEFRA/water-abstraction-service/pull/462)
- Chore: Moves the port from env to config [`#459`](https://github.com/DEFRA/water-abstraction-service/pull/459)

#### [v1.23.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.22.0...v1.23.0)

> 29 May 2019

- Fix: Tidies up bad logger code [`#456`](https://github.com/DEFRA/water-abstraction-service/pull/456)
- Fix: Makes the CSV validation less strict [`#451`](https://github.com/DEFRA/water-abstraction-service/pull/451)
- Fix: Do not import licences without a version [`#447`](https://github.com/DEFRA/water-abstraction-service/pull/447)
- Chore: Update logger to latest version [`#445`](https://github.com/DEFRA/water-abstraction-service/pull/445)
- Feat: Import data into new schema when in progress [`#437`](https://github.com/DEFRA/water-abstraction-service/pull/437)
- Fix: Prevent large void return requests [`#434`](https://github.com/DEFRA/water-abstraction-service/pull/434)
- Chore: Updates eslint and adds ignore file [`#432`](https://github.com/DEFRA/water-abstraction-service/pull/432)

#### [v1.22.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.20.1...v1.22.0)

> 15 May 2019

- Adds a query param to the company returns filter so that by default, only returns that can be entered via the digital service are returned. [`#440`](https://github.com/DEFRA/water-abstraction-service/pull/440)
- Feat: Adds XML upload tests [`#420`](https://github.com/DEFRA/water-abstraction-service/pull/420)
- Convert CSV and XML returns upload code to adapters [`#430`](https://github.com/DEFRA/water-abstraction-service/pull/430)
- Add CSV to JSON mapper [`#427`](https://github.com/DEFRA/water-abstraction-service/pull/427)
- Feat: Adds returns CSV validator [`#426`](https://github.com/DEFRA/water-abstraction-service/pull/426)
- Add company returns API endpoint [`#422`](https://github.com/DEFRA/water-abstraction-service/pull/422)
- Add return invitation notification to batch notifications [`#416`](https://github.com/DEFRA/water-abstraction-service/pull/416)
- Returns reminder cover letter changes [`#414`](https://github.com/DEFRA/water-abstraction-service/pull/414)
- Remove old code for Notify status checks [`#409`](https://github.com/DEFRA/water-abstraction-service/pull/409)
- Update copy for returns reminder letter [`#408`](https://github.com/DEFRA/water-abstraction-service/pull/408)
- Fixes return due dates for some split log scenarios to be 28 days aft… [`#407`](https://github.com/DEFRA/water-abstraction-service/pull/407)
- Bugfix/water 2067 [`#395`](https://github.com/DEFRA/water-abstraction-service/pull/395)
- Remove old returns invitation code [`c572d3f`](https://github.com/DEFRA/water-abstraction-service/commit/c572d3fa919dd490d10c240971d352f5e0864b8d)
- Tests for stringify-values, Contact.generateId, mapContactAddress [`893a7b1`](https://github.com/DEFRA/water-abstraction-service/commit/893a7b10e23c55dd60739a67c0f784bb7a5e7a46)
- Add tests for returns invite batch notification config [`5e45288`](https://github.com/DEFRA/water-abstraction-service/commit/5e452882b8ded27ab1bc3c2f331251a2e1b039d5)
- Add tests for markAsProcessed [`5f818ca`](https://github.com/DEFRA/water-abstraction-service/commit/5f818cafe86df22f94fcb50a6d959de3ce8bd7a9)
- Remove old XML helpers, reduce complexity of XML return frequency mapper [`861cf03`](https://github.com/DEFRA/water-abstraction-service/commit/861cf03c3c5442c7e88b19f716a110f0c5b76010)
- Resolve issues with generated CSV passing validation [`321bf59`](https://github.com/DEFRA/water-abstraction-service/commit/321bf59cd2562756eb437383f888a5c778a444da)
- Remove commented code [`dc80257`](https://github.com/DEFRA/water-abstraction-service/commit/dc802572b851b9dc4c4e6ddebb27a222242d3968)

#### [v1.20.1](https://github.com/DEFRA/water-abstraction-service/compare/v1.19.0...v1.20.1)

> 23 April 2019

- Only log error level messages in production [`#404`](https://github.com/DEFRA/water-abstraction-service/pull/404)
- Feat: Include expired licences in internal search [`#394`](https://github.com/DEFRA/water-abstraction-service/pull/394)
- Merge tag 'public_beta_1.19_hotfix_1' into develop [`d76d5b4`](https://github.com/DEFRA/water-abstraction-service/commit/d76d5b4deac5d719ed7dde997bb5934e51b56837)
- Fix XML returns issue where monthly return mapping was incorrect if date in XML not start of month [`9894ffa`](https://github.com/DEFRA/water-abstraction-service/commit/9894ffa58106f349e2fb1db2d1d5cee54884b46e)
- Merge tag 'public_beta_1.19_hotfix_1' into develop [`afa0d65`](https://github.com/DEFRA/water-abstraction-service/commit/afa0d659f5dfaa8188468c1295e7bbecf6ba5aab)
- Fix issue with XML to JSON return upload mapping and validation [`f9a629e`](https://github.com/DEFRA/water-abstraction-service/commit/f9a629e7e7b100a41caa63ab92e8e5fdd33887f6)
- Merge tag 'public_beta_1.19_hotfix_1' into develop [`841496e`](https://github.com/DEFRA/water-abstraction-service/commit/841496ed2d8b8985b95fa316d5e95d11c45d88f1)
- Fixes issues with XML return upload mapping to JSON: [`a5868a4`](https://github.com/DEFRA/water-abstraction-service/commit/a5868a42b34e7e3aa3fd0403f1b7027463758ed8)
- Merge tag 'public_beta_1.19' into develop [`682517c`](https://github.com/DEFRA/water-abstraction-service/commit/682517c9454c73757698e3a96af4c6b8ba7ecc77)

#### [v1.19.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.18.0...v1.19.0)

> 9 April 2019

- Increase payload limit for uploading return XML [`#392`](https://github.com/DEFRA/water-abstraction-service/pull/392)
- Include production months 45/46 in logic to display XML upload link [`#387`](https://github.com/DEFRA/water-abstraction-service/pull/387)
- Fixes issue where nil return could not be uploaded via XML because re… [`#384`](https://github.com/DEFRA/water-abstraction-service/pull/384)
- Add new fields to return model to support winter returns UI changes [`#375`](https://github.com/DEFRA/water-abstraction-service/pull/375)
- Fixes issue where nil return could not be uploaded via XML because return frequency omitted from mapped JSON [`ca99cd8`](https://github.com/DEFRA/water-abstraction-service/commit/ca99cd867941a5697843433f3ea78fc04380ddc1)

#### [v1.18.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.17.1...v1.18.0)

> 19 March 2019

- Fix: Fixes to the returns form [`#372`](https://github.com/DEFRA/water-abstraction-service/pull/372)
- Feat: Updates paper forms with latest content [`#364`](https://github.com/DEFRA/water-abstraction-service/pull/364)
- Tweaks to upload validation messaging [`#361`](https://github.com/DEFRA/water-abstraction-service/pull/361)
- Feat: Update paper form issuing [`#360`](https://github.com/DEFRA/water-abstraction-service/pull/360)
- Fixes an issue where the users API only returned the first 100 docume… [`#358`](https://github.com/DEFRA/water-abstraction-service/pull/358)
- Fix issues with upload return submission [`#356`](https://github.com/DEFRA/water-abstraction-service/pull/356)
- Fixes an issue with return upload preview where return ID was expected in query param instead of URL path [`#355`](https://github.com/DEFRA/water-abstraction-service/pull/355)
- Fix issues with XML to JSON mapping [`#354`](https://github.com/DEFRA/water-abstraction-service/pull/354)
- Feat: Updates the returns form with latest content [`#348`](https://github.com/DEFRA/water-abstraction-service/pull/348)
- Feat: Adds a script to create/delete test returns [`#338`](https://github.com/DEFRA/water-abstraction-service/pull/338)
- Upload XML issues [`#349`](https://github.com/DEFRA/water-abstraction-service/pull/349)
- Add isUpload flag to return metadata [`#350`](https://github.com/DEFRA/water-abstraction-service/pull/350)
- Feat: Adds more detailed error info to events [`#336`](https://github.com/DEFRA/water-abstraction-service/pull/336)
- Feat: Use common return functions from helpers library [`#334`](https://github.com/DEFRA/water-abstraction-service/pull/334)
- Feat/water 1929 [`#335`](https://github.com/DEFRA/water-abstraction-service/pull/335)
- Include company entity ID in users detail endpoint [`#333`](https://github.com/DEFRA/water-abstraction-service/pull/333)
- Feature/1935 updated json to xml mapping [`#331`](https://github.com/DEFRA/water-abstraction-service/pull/331)
- Feat: Adds bulk returns upload job [`#325`](https://github.com/DEFRA/water-abstraction-service/pull/325)
- Adds bulk return submit endpoint.  Rewrite lib/event.js to use plain … [`#324`](https://github.com/DEFRA/water-abstraction-service/pull/324)
- Add schema validation and xml to json mapping functionality [`#322`](https://github.com/DEFRA/water-abstraction-service/pull/322)
- Implements the latest version of the logger [`#320`](https://github.com/DEFRA/water-abstraction-service/pull/320)
- Feat/water 1928 [`#319`](https://github.com/DEFRA/water-abstraction-service/pull/319)
- Bug fix/1864 null start date [`#314`](https://github.com/DEFRA/water-abstraction-service/pull/314)
- Adds an API endpoint to review an uploaded returns JSON file [`#313`](https://github.com/DEFRA/water-abstraction-service/pull/313)
- Adds a module to perform tests on bulk uploaded returns data [`#309`](https://github.com/DEFRA/water-abstraction-service/pull/309)
- Feat: Adds returns upload PG Boss jobs [`#307`](https://github.com/DEFRA/water-abstraction-service/pull/307)
- Feat: Upload return upload to S3 [`#299`](https://github.com/DEFRA/water-abstraction-service/pull/299)
- Build(deps): [Security] Bump extend from 3.0.1 to 3.0.2 [`#298`](https://github.com/DEFRA/water-abstraction-service/pull/298)
- Feat: Map XML to JSON using return model shape [`9820f8e`](https://github.com/DEFRA/water-abstraction-service/commit/9820f8e84af19acf0dbeb341b370df7d9e4da6af)
- Use logger from water-abstraction-helpers module [`d8837fd`](https://github.com/DEFRA/water-abstraction-service/commit/d8837fd5fcf6d121960da3abcf9415705f79d4f6)
- Code climate feedback [`5ffe184`](https://github.com/DEFRA/water-abstraction-service/commit/5ffe18446002abaa367335b171897b14f69ae5d1)
- Code climate recommendations [`5c7fe31`](https://github.com/DEFRA/water-abstraction-service/commit/5c7fe3150d2275f40da93e572f5197e7b306de15)
- Incorporates new event factory [`645ead9`](https://github.com/DEFRA/water-abstraction-service/commit/645ead9a8ab9525af268c28a073add1072de0e70)
- - Fix issues with JSON to XML mapping when data not found. [`d154869`](https://github.com/DEFRA/water-abstraction-service/commit/d154869a078a79f8bcd1d39d9911115cd098a57b)
- Code climate fixes [`9a81f17`](https://github.com/DEFRA/water-abstraction-service/commit/9a81f17bab068ca962683e82356c1b5864177683)
- Reduce complexity of validator [`eb93925`](https://github.com/DEFRA/water-abstraction-service/commit/eb93925f9df82a4551aa05ff04dda24aed77cbe4)
- Fix: Handles empty abstraction reform licences [`8ff1d9b`](https://github.com/DEFRA/water-abstraction-service/commit/8ff1d9baa04cb88acc37cc00a7f1124e13d689df)
- getUserByUserName returns undefined when not found [`fd23957`](https://github.com/DEFRA/water-abstraction-service/commit/fd23957e66745026ec7c797a56e1fdc98a065688)
- More code climate feedback [`42ce4bf`](https://github.com/DEFRA/water-abstraction-service/commit/42ce4bfe488b8af918e8fbc9a1448565635563af)
- Code climate feedback [`1705b95`](https://github.com/DEFRA/water-abstraction-service/commit/1705b9539d56898033228497517a168a4217a56d)
- Updates idm connector to target specific application [`454afdf`](https://github.com/DEFRA/water-abstraction-service/commit/454afdfd5744cc413b0f2f13b8309fdaeff035b3)
- Fix comment [`98d70da`](https://github.com/DEFRA/water-abstraction-service/commit/98d70da24f1f334da697c0075ce1b34c9c293c63)

#### [v1.17.1](https://github.com/DEFRA/water-abstraction-service/compare/v1.17.0...v1.17.1)

> 7 February 2019

- Find all pages of document matches [`#297`](https://github.com/DEFRA/water-abstraction-service/pull/297)

#### [v1.17.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.16.0...v1.17.0)

> 7 February 2019

- Adds licence holder full name to document summary API endpoint [`#296`](https://github.com/DEFRA/water-abstraction-service/pull/296)
- Only display quantities if there are a single set across all purposes [`#295`](https://github.com/DEFRA/water-abstraction-service/pull/295)
- Fix: Filter communications by successful send [`#294`](https://github.com/DEFRA/water-abstraction-service/pull/294)
- Remove null aggregate quantities from document summary API call [`#293`](https://github.com/DEFRA/water-abstraction-service/pull/293)
- Feat: Adds additional data to communication responses [`#292`](https://github.com/DEFRA/water-abstraction-service/pull/292)
- Feat: Adds a communication resource [`#289`](https://github.com/DEFRA/water-abstraction-service/pull/289)
- fix: package.json & package-lock.json to reduce vulnerabilities [`#288`](https://github.com/DEFRA/water-abstraction-service/pull/288)
- Feat/water 1893 changes [`#287`](https://github.com/DEFRA/water-abstraction-service/pull/287)
- Add gauging station data to licence summary endpoint [`#286`](https://github.com/DEFRA/water-abstraction-service/pull/286)
- Feat: Handles internal users in user status endpoint [`#280`](https://github.com/DEFRA/water-abstraction-service/pull/280)
- Add new endpoint for licence summary [`#285`](https://github.com/DEFRA/water-abstraction-service/pull/285)
- Feat: Adds resource to get document users [`#284`](https://github.com/DEFRA/water-abstraction-service/pull/284)
- Adds isSummer boolean flag to returns imported to return service [`#283`](https://github.com/DEFRA/water-abstraction-service/pull/283)
- Implement internal search API in water service [`#279`](https://github.com/DEFRA/water-abstraction-service/pull/279)
- Feat: Adds user status resource [`#278`](https://github.com/DEFRA/water-abstraction-service/pull/278)
- Fix licence holder name field for documents in internal search API [`27886c8`](https://github.com/DEFRA/water-abstraction-service/commit/27886c85bddcbb4f93e3e07cf99e9f1f06dad7ce)
- Spelling correct and expose more verification data [`a670f08`](https://github.com/DEFRA/water-abstraction-service/commit/a670f0860aca7a9ee87fbe480e8ffe15ba796d49)

#### [v1.16.0](https://github.com/DEFRA/water-abstraction-service/compare/v1.15.0...v1.16.0)

> 23 January 2019

- Formats recipient name correctly for returns invitation / final remin… [`#276`](https://github.com/DEFRA/water-abstraction-service/pull/276)
- Add ability to send return final reminder [`#274`](https://github.com/DEFRA/water-abstraction-service/pull/274)
- Fix: Updates format cycle end date calculation [`#272`](https://github.com/DEFRA/water-abstraction-service/pull/272)
- Modifies import process to set status of invalid return cycles to void rather than deleting them [`#271`](https://github.com/DEFRA/water-abstraction-service/pull/271)
- Resolves an issue where gauging stations retrieved from flood API were always considered inactive if they had no status, which is an optional field. [`#263`](https://github.com/DEFRA/water-abstraction-service/pull/263)
- Resolve 'null value in column "status" violates not-null constraint' log error [`#261`](https://github.com/DEFRA/water-abstraction-service/pull/261)
- Uses a unique id for points and conditions data [`#248`](https://github.com/DEFRA/water-abstraction-service/pull/248)
- Feat: A document licence resource [`#245`](https://github.com/DEFRA/water-abstraction-service/pull/245)
- Chore: Adds repository field to package.json [`#244`](https://github.com/DEFRA/water-abstraction-service/pull/244)
- Adds /documents/{documentId}/licences/conditions [`c5522b7`](https://github.com/DEFRA/water-abstraction-service/commit/c5522b72223ea98766704145c261926a2649cbf9)
- Adds /documents/{documentId}/licences/conditions [`e2651ab`](https://github.com/DEFRA/water-abstraction-service/commit/e2651ab84f4aeb07a856971a62e69c693b8a5683)
- Codeclimate feedback [`fa4d014`](https://github.com/DEFRA/water-abstraction-service/commit/fa4d014c39a09644275b2dee6a5faefc35555852)
- Returns facade was using wrong date for comparison [`a3130eb`](https://github.com/DEFRA/water-abstraction-service/commit/a3130ebf5781e65eded4e294e4ded5b7f0dd636a)

#### v1.15.0

> 12 December 2018

- Fix: Investigation of isNil validation error [`#241`](https://github.com/DEFRA/water-abstraction-service/pull/241)
- Retry sending message on failure [`#240`](https://github.com/DEFRA/water-abstraction-service/pull/240)
- Feat: Improves logging [`#239`](https://github.com/DEFRA/water-abstraction-service/pull/239)
- Bugfix/water 1675 [`#236`](https://github.com/DEFRA/water-abstraction-service/pull/236)
- Use NPM module for hapi-pg-rest-api [`#234`](https://github.com/DEFRA/water-abstraction-service/pull/234)
- Feat/water 1734 [`#231`](https://github.com/DEFRA/water-abstraction-service/pull/231)
- Bug fix/water 1724 task runner logging [`#226`](https://github.com/DEFRA/water-abstraction-service/pull/226)
- Feat: Remove old NALD password from zip extract [`#225`](https://github.com/DEFRA/water-abstraction-service/pull/225)
- Fixes an issue where errors thrown during PG boss subscribers were not being logged [`#221`](https://github.com/DEFRA/water-abstraction-service/pull/221)
- Logs additional data if returns request fails validation check.  Also… [`#220`](https://github.com/DEFRA/water-abstraction-service/pull/220)
- Add return reminder template.  Add QR code containing return ID to bo… [`#214`](https://github.com/DEFRA/water-abstraction-service/pull/214)
- Bump hapi from 17.5.2 to 17.8.1 [`#218`](https://github.com/DEFRA/water-abstraction-service/pull/218)
- Bump code from 5.2.0 to 5.2.4 [`#216`](https://github.com/DEFRA/water-abstraction-service/pull/216)
- Feat: Consolidate env variables [`#204`](https://github.com/DEFRA/water-abstraction-service/pull/204)
- Feat: Align with developer standards [`#213`](https://github.com/DEFRA/water-abstraction-service/pull/213)
- Fix: Use Sun - Sat weeks for NALD [`#210`](https://github.com/DEFRA/water-abstraction-service/pull/210)
- Feat: Adds under query flag to return model [`#189`](https://github.com/DEFRA/water-abstraction-service/pull/189)
- Feat: Api connector logging improvement [`#188`](https://github.com/DEFRA/water-abstraction-service/pull/188)
- Remove width from cover-content container which allowed content to overflow its flexbox container [`#187`](https://github.com/DEFRA/water-abstraction-service/pull/187)
- Ensure logger is configured before use in import process [`#186`](https://github.com/DEFRA/water-abstraction-service/pull/186)
- Feat: Adds proxy support for logging to Errbit [`#185`](https://github.com/DEFRA/water-abstraction-service/pull/185)
- Fix: Move password from code to environment [`#184`](https://github.com/DEFRA/water-abstraction-service/pull/184)
- Add return API endpoint to patch return - status / received date [`#182`](https://github.com/DEFRA/water-abstraction-service/pull/182)
- Feature: Logging improvements [`#183`](https://github.com/DEFRA/water-abstraction-service/pull/183)
- Add verbose mode to return messages from API call [`#181`](https://github.com/DEFRA/water-abstraction-service/pull/181)
- Fix duplicate word in guidance on return form [`#180`](https://github.com/DEFRA/water-abstraction-service/pull/180)
- Fix page count and address font size [`#179`](https://github.com/DEFRA/water-abstraction-service/pull/179)
- Bugfix/water 1625 [`#178`](https://github.com/DEFRA/water-abstraction-service/pull/178)
- Feature: Adds dynamic returns form [`#177`](https://github.com/DEFRA/water-abstraction-service/pull/177)
- Adjust Joi schema to allow meter details in abstractionVolumes flow [`#176`](https://github.com/DEFRA/water-abstraction-service/pull/176)
- Update fields depend on return cycle [`#174`](https://github.com/DEFRA/water-abstraction-service/pull/174)
- Enqueue messages sequentially rather than in parallel.  Longer expiry time for queued messages.  Prioritise email/SMS over letters for sending. [`#173`](https://github.com/DEFRA/water-abstraction-service/pull/173)
- Fix: Update airbrake js [`#172`](https://github.com/DEFRA/water-abstraction-service/pull/172)
- Hand off queuing of Notify messages to PG Boss [`#171`](https://github.com/DEFRA/water-abstraction-service/pull/171)
- Fix: Handle null purposes aliases [`#170`](https://github.com/DEFRA/water-abstraction-service/pull/170)
- Fetch licence contacts in batches [`#169`](https://github.com/DEFRA/water-abstraction-service/pull/169)
- Fix: Adds the dueDate to the expected payload [`#168`](https://github.com/DEFRA/water-abstraction-service/pull/168)
- Fix: Change due date to 28 days after end date [`#167`](https://github.com/DEFRA/water-abstraction-service/pull/167)
- Tweaks to picklist data / API [`#166`](https://github.com/DEFRA/water-abstraction-service/pull/166)
- Feat: Improved due returns messaging [`#165`](https://github.com/DEFRA/water-abstraction-service/pull/165)
- Add picklist API in water service [`#164`](https://github.com/DEFRA/water-abstraction-service/pull/164)
- Bugfix/spring clean [`#161`](https://github.com/DEFRA/water-abstraction-service/pull/161)
- Feature: Add purpose alias to return metadata [`#163`](https://github.com/DEFRA/water-abstraction-service/pull/163)
- Take format time-limited start/end date into account when calculating… [`#160`](https://github.com/DEFRA/water-abstraction-service/pull/160)
- Feat/water 1407 [`#157`](https://github.com/DEFRA/water-abstraction-service/pull/157)
- Remove full URL from QR code [`#159`](https://github.com/DEFRA/water-abstraction-service/pull/159)
- Show JSON in paper form for test purposes.  Add additional data to pa… [`#158`](https://github.com/DEFRA/water-abstraction-service/pull/158)
- Render PDF HTML content directly with Nunjucks rather than via URL request [`#156`](https://github.com/DEFRA/water-abstraction-service/pull/156)
- Use internal URL for PDF generation [`#155`](https://github.com/DEFRA/water-abstraction-service/pull/155)
- Feat: Handle meter readings in return model [`#154`](https://github.com/DEFRA/water-abstraction-service/pull/154)
- Hopefully resolve proxy issues with PDF generation [`#153`](https://github.com/DEFRA/water-abstraction-service/pull/153)
- Feat/water 1475 [`#152`](https://github.com/DEFRA/water-abstraction-service/pull/152)
- Fix allowed return statuses [`#151`](https://github.com/DEFRA/water-abstraction-service/pull/151)
- Unit converters should pass through null value [`#150`](https://github.com/DEFRA/water-abstraction-service/pull/150)
- Feat/water 1438 [`#149`](https://github.com/DEFRA/water-abstraction-service/pull/149)
- Feat/water 1438 [`#148`](https://github.com/DEFRA/water-abstraction-service/pull/148)
- Improve split log handling [`#147`](https://github.com/DEFRA/water-abstraction-service/pull/147)
- Feat/water 1352 [`#145`](https://github.com/DEFRA/water-abstraction-service/pull/145)
- Calculate current version in permit repo.  CRM IsCurrent flag determi… [`#146`](https://github.com/DEFRA/water-abstraction-service/pull/146)
- Feat: Future licences are not deemed to be current [`#144`](https://github.com/DEFRA/water-abstraction-service/pull/144)
- Add return format data to licence data imported to permit repo [`#143`](https://github.com/DEFRA/water-abstraction-service/pull/143)
- Split returns into current / not current [`#142`](https://github.com/DEFRA/water-abstraction-service/pull/142)
- Feat/calculate cycles 2 [`#141`](https://github.com/DEFRA/water-abstraction-service/pull/141)
- Feat/calculate cycles 2 [`#140`](https://github.com/DEFRA/water-abstraction-service/pull/140)
- Feat/return lines units [`#139`](https://github.com/DEFRA/water-abstraction-service/pull/139)
- Include received date in upsert [`#137`](https://github.com/DEFRA/water-abstraction-service/pull/137)
- Remove await from Slack posts [`#136`](https://github.com/DEFRA/water-abstraction-service/pull/136)
- Feat/import returns date [`#135`](https://github.com/DEFRA/water-abstraction-service/pull/135)
- Fix units [`#134`](https://github.com/DEFRA/water-abstraction-service/pull/134)
- Import efficiency [`#133`](https://github.com/DEFRA/water-abstraction-service/pull/133)
- Feat/water 1255 [`#132`](https://github.com/DEFRA/water-abstraction-service/pull/132)
- Add indexes to fields used in import [`#131`](https://github.com/DEFRA/water-abstraction-service/pull/131)
- Fix issue with notification log.  Also change poss interval timing [`#130`](https://github.com/DEFRA/water-abstraction-service/pull/130)
- Post data to permit repo / CRM / import log in batches [`#129`](https://github.com/DEFRA/water-abstraction-service/pull/129)
- Adds connection pool logging [`#128`](https://github.com/DEFRA/water-abstraction-service/pull/128)
- Tweaks to expiry content [`#126`](https://github.com/DEFRA/water-abstraction-service/pull/126)
- Add variables to notification configs [`#125`](https://github.com/DEFRA/water-abstraction-service/pull/125)
- Changes the upsert to also update the subtype [`#124`](https://github.com/DEFRA/water-abstraction-service/pull/124)
- Fix issue with loading licences in notifications by removing paginated results call [`#123`](https://github.com/DEFRA/water-abstraction-service/pull/123)
- Import licences in batches [`#122`](https://github.com/DEFRA/water-abstraction-service/pull/122)
- Use single connection pool [`#121`](https://github.com/DEFRA/water-abstraction-service/pull/121)
- Feat/import tweaks [`#120`](https://github.com/DEFRA/water-abstraction-service/pull/120)
- Only watch the file system in local dev [`#119`](https://github.com/DEFRA/water-abstraction-service/pull/119)
- Use single job for download/extract CSV until we can do this in S3 bucket [`#118`](https://github.com/DEFRA/water-abstraction-service/pull/118)
- Feat/water 1261 mk2 [`#117`](https://github.com/DEFRA/water-abstraction-service/pull/117)
- Disable errbit [`#116`](https://github.com/DEFRA/water-abstraction-service/pull/116)
- Add VmL version back to permit repo packet [`#115`](https://github.com/DEFRA/water-abstraction-service/pull/115)
- Migration to delete deprecated scheduled tasks for NALD import [`#114`](https://github.com/DEFRA/water-abstraction-service/pull/114)
- Bugfix/import file path slash [`#113`](https://github.com/DEFRA/water-abstraction-service/pull/113)
- Remove duplicate forward slash from file path [`#112`](https://github.com/DEFRA/water-abstraction-service/pull/112)
- Fix status page [`#111`](https://github.com/DEFRA/water-abstraction-service/pull/111)
- Feat/boss import poc [`#109`](https://github.com/DEFRA/water-abstraction-service/pull/109)
- Feat/water 1179 [`#108`](https://github.com/DEFRA/water-abstraction-service/pull/108)
- Bugfix/convert flow units [`#107`](https://github.com/DEFRA/water-abstraction-service/pull/107)
- Feat/notify failsafe [`#105`](https://github.com/DEFRA/water-abstraction-service/pull/105)
- Convert ml/d to m3/s in river flow data [`#106`](https://github.com/DEFRA/water-abstraction-service/pull/106)
- WATER-1151: Email titles. [`#104`](https://github.com/DEFRA/water-abstraction-service/pull/104)
- WATER-1151 and WATER-1153 [`#103`](https://github.com/DEFRA/water-abstraction-service/pull/103)
- chore: Config and linting [`#102`](https://github.com/DEFRA/water-abstraction-service/pull/102)
- Ensure 'error' in status column in counted as error in notification event log [`#101`](https://github.com/DEFRA/water-abstraction-service/pull/101)
- Feat/pg boss [`#99`](https://github.com/DEFRA/water-abstraction-service/pull/99)
- bugfix/WATER-1086: Plurals in notifications [`#98`](https://github.com/DEFRA/water-abstraction-service/pull/98)
- Tolerate missing fields in API data [`#94`](https://github.com/DEFRA/water-abstraction-service/pull/94)
- Include active status in data returned from river levels API [`#93`](https://github.com/DEFRA/water-abstraction-service/pull/93)
- Create local cache of gauging stations, update list daily [`#92`](https://github.com/DEFRA/water-abstraction-service/pull/92)
- Remove proxy:null when communicating with river levels API [`#91`](https://github.com/DEFRA/water-abstraction-service/pull/91)
- Feat/water 1090 [`#90`](https://github.com/DEFRA/water-abstraction-service/pull/90)
- Fix migrations [`#89`](https://github.com/DEFRA/water-abstraction-service/pull/89)
- Remove notify search criteria in update notify status task [`#87`](https://github.com/DEFRA/water-abstraction-service/pull/87)
- Poll notify for message status for 3 days following message send [`#86`](https://github.com/DEFRA/water-abstraction-service/pull/86)
- Switch back to original scheduler implementation [`#85`](https://github.com/DEFRA/water-abstraction-service/pull/85)
- Add migrations for notify templates and scheduled task [`#83`](https://github.com/DEFRA/water-abstraction-service/pull/83)
- Notification tasks DB migration [`#82`](https://github.com/DEFRA/water-abstraction-service/pull/82)
- Stop slack error breaking S3 import [`#81`](https://github.com/DEFRA/water-abstraction-service/pull/81)
- Run scheduled tasks in separate process [`#80`](https://github.com/DEFRA/water-abstraction-service/pull/80)
- Set date and unique reference in rendered template [`#79`](https://github.com/DEFRA/water-abstraction-service/pull/79)
- Fetch all pages of results from permit repo.  Allow custom template t… [`#78`](https://github.com/DEFRA/water-abstraction-service/pull/78)
- Contact dedupe case insensitive and remove null fields [`#77`](https://github.com/DEFRA/water-abstraction-service/pull/77)
- Remove slack [`#76`](https://github.com/DEFRA/water-abstraction-service/pull/76)
- Feat/notification event metadata [`#75`](https://github.com/DEFRA/water-abstraction-service/pull/75)
- Remove output escaping from Nunjucks rendered markdown template output [`#74`](https://github.com/DEFRA/water-abstraction-service/pull/74)
- Include subject personalisation for email notifications [`#73`](https://github.com/DEFRA/water-abstraction-service/pull/73)
- Fix email recipient for notifications [`#72`](https://github.com/DEFRA/water-abstraction-service/pull/72)
- Feat/water 938 [`#71`](https://github.com/DEFRA/water-abstraction-service/pull/71)
- Feat/water 937 [`#70`](https://github.com/DEFRA/water-abstraction-service/pull/70)
- Prioritise contacts for notifications in revised order [`#69`](https://github.com/DEFRA/water-abstraction-service/pull/69)
- Add task config table/API endpoint for notifications [`#68`](https://github.com/DEFRA/water-abstraction-service/pull/68)
- Feat/lookup data [`#67`](https://github.com/DEFRA/water-abstraction-service/pull/67)
- Add error handling to NALD import [`#66`](https://github.com/DEFRA/water-abstraction-service/pull/66)
- Allow scheduled tasks to be updated via API [`#65`](https://github.com/DEFRA/water-abstraction-service/pull/65)
- Allow scheduled tasks to be updated via API [`#64`](https://github.com/DEFRA/water-abstraction-service/pull/64)
- Add support for import concurrency env var, default to 1 [`#62`](https://github.com/DEFRA/water-abstraction-service/pull/62)
- Use area import email if available for notifications [`#63`](https://github.com/DEFRA/water-abstraction-service/pull/63)
- Remove git+ [`#60`](https://github.com/DEFRA/water-abstraction-service/pull/60)
- Fix issue with document name endpoint removed from CRM in renewal ema… [`#59`](https://github.com/DEFRA/water-abstraction-service/pull/59)
- Contact de-duplication for notification sending [`#58`](https://github.com/DEFRA/water-abstraction-service/pull/58)
- fix inconsistency in primary key handling [`#57`](https://github.com/DEFRA/water-abstraction-service/pull/57)
- endpoint for event log and changes to support additional notification… [`#56`](https://github.com/DEFRA/water-abstraction-service/pull/56)
- Create new config option '$' for import task which imports registered… [`#55`](https://github.com/DEFRA/water-abstraction-service/pull/55)
- Record last run start time [`#54`](https://github.com/DEFRA/water-abstraction-service/pull/54)
- Feat/import multiple licence nos [`#53`](https://github.com/DEFRA/water-abstraction-service/pull/53)
- Include expiry date in current licence query.  Get latest version by … [`#52`](https://github.com/DEFRA/water-abstraction-service/pull/52)
- Include IsCurrent flag in CRM metadata.  current_version property nul… [`#51`](https://github.com/DEFRA/water-abstraction-service/pull/51)
- Fix linter errors [`#50`](https://github.com/DEFRA/water-abstraction-service/pull/50)
- daily s3 update [`#48`](https://github.com/DEFRA/water-abstraction-service/pull/48)
- Only include gulp in dev deps [`#46`](https://github.com/DEFRA/water-abstraction-service/pull/46)
- Bugfix/water 797 [`#47`](https://github.com/DEFRA/water-abstraction-service/pull/47)
- Feat/water 741 [`#45`](https://github.com/DEFRA/water-abstraction-service/pull/45)
- Feat/coverage path [`#44`](https://github.com/DEFRA/water-abstraction-service/pull/44)
- Added ability to schedule update to existing records (currently only … [`#42`](https://github.com/DEFRA/water-abstraction-service/pull/42)
- Feature/fix issue with contact methods causing multiple contacts [`#41`](https://github.com/DEFRA/water-abstraction-service/pull/41)
- improve scheduler resiliency [`#40`](https://github.com/DEFRA/water-abstraction-service/pull/40)
- Update .snyk file, update dependencies [`#39`](https://github.com/DEFRA/water-abstraction-service/pull/39)
- always_used_scheduler_for_notify [`#38`](https://github.com/DEFRA/water-abstraction-service/pull/38)
- update-hapi-pgi-rest-api [`#36`](https://github.com/DEFRA/water-abstraction-service/pull/36)
- update unit tests [`#35`](https://github.com/DEFRA/water-abstraction-service/pull/35)
- new endpoints for admin use [`#33`](https://github.com/DEFRA/water-abstraction-service/pull/33)
- integrate cutom licence name with expiry notification [`#32`](https://github.com/DEFRA/water-abstraction-service/pull/32)
- notify templates endpoint [`#31`](https://github.com/DEFRA/water-abstraction-service/pull/31)
- Add endpoint for scheduled notifications [`#30`](https://github.com/DEFRA/water-abstraction-service/pull/30)
- update import process so that the licence_start_dt and licence_end_dt… [`#24`](https://github.com/DEFRA/water-abstraction-service/pull/24)
- add the notify templates [`#29`](https://github.com/DEFRA/water-abstraction-service/pull/29)
- water-742 [`#28`](https://github.com/DEFRA/water-abstraction-service/pull/28)
- implement scheduled notifications [`#26`](https://github.com/DEFRA/water-abstraction-service/pull/26)
- remove crm migrations [`#23`](https://github.com/DEFRA/water-abstraction-service/pull/23)
- added current_version object to licence [`#22`](https://github.com/DEFRA/water-abstraction-service/pull/22)
- Feat/water 600 [`#21`](https://github.com/DEFRA/water-abstraction-service/pull/21)
- Modify import to exclude missing licences and import in batches [`#20`](https://github.com/DEFRA/water-abstraction-service/pull/20)
- Feat/import selected licences [`#19`](https://github.com/DEFRA/water-abstraction-service/pull/19)
- fix issue with nald data import [`#18`](https://github.com/DEFRA/water-abstraction-service/pull/18)
- quieter import [`#17`](https://github.com/DEFRA/water-abstraction-service/pull/17)
- Ignore data files loaded from NALD [`#12`](https://github.com/DEFRA/water-abstraction-service/pull/12)
- and point_source object to purpose points [`#16`](https://github.com/DEFRA/water-abstraction-service/pull/16)
- Lookup point using point id not purpose id... [`#15`](https://github.com/DEFRA/water-abstraction-service/pull/15)
- Feature/adjustments to nald import [`#14`](https://github.com/DEFRA/water-abstraction-service/pull/14)
- Rework to not use the ABSTAT_WFD table (which turns out to be a view) [`#13`](https://github.com/DEFRA/water-abstraction-service/pull/13)
- Adjust version.parties [`#11`](https://github.com/DEFRA/water-abstraction-service/pull/11)
- Renamed purposes [`#10`](https://github.com/DEFRA/water-abstraction-service/pull/10)
- Get previous licence versions [`#9`](https://github.com/DEFRA/water-abstraction-service/pull/9)
- Tweaking scheduler API config [`#8`](https://github.com/DEFRA/water-abstraction-service/pull/8)
- nald import scheduler [`#7`](https://github.com/DEFRA/water-abstraction-service/pull/7)
- Notify service [`#6`](https://github.com/DEFRA/water-abstraction-service/pull/6)
- Proxy-agent for s3 downloads [`#5`](https://github.com/DEFRA/water-abstraction-service/pull/5)
- Update to latest hapi-pg-rest-api [`#4`](https://github.com/DEFRA/water-abstraction-service/pull/4)
- Add proxy to knox [`#3`](https://github.com/DEFRA/water-abstraction-service/pull/3)
- import nald data from s3 to import schema and extract individual lice… [`#2`](https://github.com/DEFRA/water-abstraction-service/pull/2)
- Feat/water 648 [`#1`](https://github.com/DEFRA/water-abstraction-service/pull/1)
- Removes gulp [`7eae680`](https://github.com/DEFRA/water-abstraction-service/commit/7eae6800499c2d0f84cb9022353c402cacd925be)
- Render Nunjucks templates [`1bf27f4`](https://github.com/DEFRA/water-abstraction-service/commit/1bf27f45f111747a986f68fc1feccc5622581a30)
- bugfix/WATER-1086: Notifications updates [`6e18ed7`](https://github.com/DEFRA/water-abstraction-service/commit/6e18ed7f8e8579efe509565737a0a794f6116b21)
- Send scheduled notifications with logging to events table and entities/licences/event data logged to scheduled notifications table [`93d4c9f`](https://github.com/DEFRA/water-abstraction-service/commit/93d4c9f10935b8a9bae2c3319cbae4f602e6cdef)
- Adds changelog and versioning [`9a912a2`](https://github.com/DEFRA/water-abstraction-service/commit/9a912a26a4950b3631b4f0aa87c7a99db3a16917)
- Updating vulnerable packages [`a9ad557`](https://github.com/DEFRA/water-abstraction-service/commit/a9ad557d1f8577c291870536adc4c98ec0dddfb0)
- Update notification task configs for HOF resume, stop, and warning to include separate fields for contact name and email/tel [`d59255f`](https://github.com/DEFRA/water-abstraction-service/commit/d59255fab5b8395c6163569ab604abc846a60d13)
- Feature: Further returns form content changes [`2f4a7ff`](https://github.com/DEFRA/water-abstraction-service/commit/2f4a7ff67552e5fdd942f808b72e3ea5abe8ca63)
- Fix unit test [`667f609`](https://github.com/DEFRA/water-abstraction-service/commit/667f60940048d503d3c9d864baf8f8d4225c6bea)
- Include IsCurrent flag in CRM metadata.  current_version property null if expired/revoked etc. [`36b8abf`](https://github.com/DEFRA/water-abstraction-service/commit/36b8abf9eaddae5b6a316ec1e9a48b573c1fd4cb)
- Fix: Task runner logging [`fe80e43`](https://github.com/DEFRA/water-abstraction-service/commit/fe80e43e2c9c183d9dc6da10f0b706c4ca517ee7)
- Completed notification preview step [`23e2100`](https://github.com/DEFRA/water-abstraction-service/commit/23e2100b8b7055987949b8b45c61a97114f2c292)
- Organise notifications into module [`b3a25d7`](https://github.com/DEFRA/water-abstraction-service/commit/b3a25d766de8ec40d4d4a6b8397a29988fa25385)
- Testing [`89d2b39`](https://github.com/DEFRA/water-abstraction-service/commit/89d2b399906dd4ffe7f163f179798afed2d5413b)
- Remove notify keys from DB [`850888a`](https://github.com/DEFRA/water-abstraction-service/commit/850888a5bebabbe536d2e983a3c6724b06da89b6)
- Log event [`6a4f397`](https://github.com/DEFRA/water-abstraction-service/commit/6a4f397c63dc15559d409958fc348938ae1dec30)
- Fix date issue in NALD unit test [`5103931`](https://github.com/DEFRA/water-abstraction-service/commit/51039311744d7efe853552a532b3a54a0cfb9393)
- Create initial river levels API in water service [`1402665`](https://github.com/DEFRA/water-abstraction-service/commit/1402665003e562da80c3171eb5068420acf12738)
- Tidying notification creation into factory [`32b511d`](https://github.com/DEFRA/water-abstraction-service/commit/32b511d56050ff8b6420723562a14bb1c7ab80d2)
- endpoint for event log and changes to support additional notification fields [`8973da6`](https://github.com/DEFRA/water-abstraction-service/commit/8973da60bba3c16e572e946c57b5450699c7a8b1)
- Add ability to import multiple licences with CSV in licence_ref field [`316ffd8`](https://github.com/DEFRA/water-abstraction-service/commit/316ffd86e32712bd18a7d29d545b94939fb7e9d5)
- Add API for lookup data.  Adds scheduled task to import NALD_REP_UNITS to lookup data table. [`332a43d`](https://github.com/DEFRA/water-abstraction-service/commit/332a43ddc018345058f847abdce416b3c205225a)
- Added new task to update events log with number of sent/pending/errored messages in a notification batch [`fe60dd9`](https://github.com/DEFRA/water-abstraction-service/commit/fe60dd9cd4be90d9aad072008fbd5dc0463da69e)
- Fix issue with document name endpoint removed from CRM in renewal email scheduled task [`99fadcd`](https://github.com/DEFRA/water-abstraction-service/commit/99fadcdcd8922f7bf42b45c85359705f15e56312)
- Add lookup data API [`8569540`](https://github.com/DEFRA/water-abstraction-service/commit/8569540863f052b24833486f1d90cb75452f3de2)
- Fix: Removes extra privacy page [`4c1d146`](https://github.com/DEFRA/water-abstraction-service/commit/4c1d14610464fba194115553d5d8fd5208fe80a5)
- Paper forms content updates [`ef45666`](https://github.com/DEFRA/water-abstraction-service/commit/ef45666f636a2a2b4166cd2543e536e5d6ee4c04)
- Calculate return cycle split date based on mod log only if reason is SUCC [`bf8d171`](https://github.com/DEFRA/water-abstraction-service/commit/bf8d17118bee64222afd9372c1826009b02e6ab9)
- Fetch all pages of results from permit repo.  Allow custom template types with fallback to default [`7a3c22a`](https://github.com/DEFRA/water-abstraction-service/commit/7a3c22a4fbccf56ab8fd1017866f078ae6c1926f)
- Further updates to returns paper forms [`ed8d37e`](https://github.com/DEFRA/water-abstraction-service/commit/ed8d37eccc184c7f46374c263c861f22bdf345c9)
- Move CRM call to connector code [`fc26b55`](https://github.com/DEFRA/water-abstraction-service/commit/fc26b55ebecc3cbe3120796b8466e51768d1d31a)
- Reduce function length [`b1c9671`](https://github.com/DEFRA/water-abstraction-service/commit/b1c9671a55c89f4adb57b9fd2c047ca8ef94779b)
- Create new config option '$' for import task which imports registered licences only [`0ab09c3`](https://github.com/DEFRA/water-abstraction-service/commit/0ab09c3a76e7a0a49abdb3ff1157455f29de7ba6)
- Rough implementation of sending notifications [`ace2c61`](https://github.com/DEFRA/water-abstraction-service/commit/ace2c6171750eb9fd683d0bedcaa220bbb7e9642)
- Provide a message with logger.error statements [`8221a9e`](https://github.com/DEFRA/water-abstraction-service/commit/8221a9ef824f31f942be9376fc5399a5c659337c)
- Reduce code complexity [`863bcef`](https://github.com/DEFRA/water-abstraction-service/commit/863bcef9424b45156759dff2e7d92633c6ef8641)
- Fix taskrunner linter errors [`723965f`](https://github.com/DEFRA/water-abstraction-service/commit/723965f66c3156a2353301362dab7cdd1144301e)
- Remove console.log [`ee9cf7c`](https://github.com/DEFRA/water-abstraction-service/commit/ee9cf7cdb1bcbffc9297e999aa17af72ba552f87)
- Reduce function length [`ca3ec9c`](https://github.com/DEFRA/water-abstraction-service/commit/ca3ec9c443071e2c8bdf4e8c3de3a417e10d57f3)
- Fix: Fixes an area with the due_date [`1b70998`](https://github.com/DEFRA/water-abstraction-service/commit/1b70998403bbc25ca1f81d155303c6eba9f28b2b)
- Fix issue with async load of licence data [`28d0bf0`](https://github.com/DEFRA/water-abstraction-service/commit/28d0bf04b804777cefa9410d79724b3810527ab0)
- Fix linter error [`c012523`](https://github.com/DEFRA/water-abstraction-service/commit/c0125238c293bc5682483a8b577e887ed16c3a0a)
- Fix linter error [`2965543`](https://github.com/DEFRA/water-abstraction-service/commit/2965543c6e0e9d8758c3842b4b1a8727e8511ad7)
- Use the latest code climate test reporter [`d755029`](https://github.com/DEFRA/water-abstraction-service/commit/d755029e8fd4eccc150a3240c84f74cf53682efd)
- Reduce function length [`3ab762d`](https://github.com/DEFRA/water-abstraction-service/commit/3ab762df0fccb7e2acdd108850e3d22b219c790c)
- Tidy folder structure [`c430983`](https://github.com/DEFRA/water-abstraction-service/commit/c430983318c8a08c63bfedf0bb8b0f18fc19a592)
- Tweak to river level API [`c8ab5c9`](https://github.com/DEFRA/water-abstraction-service/commit/c8ab5c98f752867af71048b22f95a4893c02af28)
- Alter send notification API to use single JSON payload [`c44f75c`](https://github.com/DEFRA/water-abstraction-service/commit/c44f75c3d6f33d1d388f493e220c7fcf70594150)
- Add CSV parse npm module [`acb69e1`](https://github.com/DEFRA/water-abstraction-service/commit/acb69e17d753540d636dfa39d0695527772f4b9b)
- Add event metadata [`3fa6be0`](https://github.com/DEFRA/water-abstraction-service/commit/3fa6be015d491ca7b06c57331e8890f7d154174e)
- Ensure pending import correctly updated [`13b4bef`](https://github.com/DEFRA/water-abstraction-service/commit/13b4bef562d0a7624034b95e5ffa9feab2e781cd)
- Updates HAPI PG Api to v4.0.1 [`c58c077`](https://github.com/DEFRA/water-abstraction-service/commit/c58c07736359f4f9c9fbfaa4ce0878ab6ed846c2)
- Include expiry date in current licence query.  Get latest version by issue/incr number. [`6f78f31`](https://github.com/DEFRA/water-abstraction-service/commit/6f78f31d482c81d36b4d468c78a02603680171ec)
- Include time in updated timestamp [`1c924ad`](https://github.com/DEFRA/water-abstraction-service/commit/1c924ad2015ea2cf56b64e57983155ca02d38d26)
- reinstate full licence load [`7ce43c1`](https://github.com/DEFRA/water-abstraction-service/commit/7ce43c16f3a174beadfb3be41a979b02f0622a9c)
- MAke NALD temp dir if none exists [`52fdafc`](https://github.com/DEFRA/water-abstraction-service/commit/52fdafca9152d1ce81bbb7accf2fc501eb90d928)
- Make AR analysis cron job hourly for QA [`c0978db`](https://github.com/DEFRA/water-abstraction-service/commit/c0978db5467e9aa00c09c6b9a5e2d661334d5c4b)
- Merge tag 'public_beta_1.13' into develop [`0f73ebb`](https://github.com/DEFRA/water-abstraction-service/commit/0f73ebb7ad9440ad30e785dfc4fc249570cb0b00)
- Updates har-validator version [`7142bac`](https://github.com/DEFRA/water-abstraction-service/commit/7142bac1a75b724d919ea16f2b35c24bccb5f5b4)
- Log notification JSON [`9f9096b`](https://github.com/DEFRA/water-abstraction-service/commit/9f9096b7871aa6e11a6b6bd2b77fd12496ec04a4)
- Decrease PG boss job check interval to default [`2b1f062`](https://github.com/DEFRA/water-abstraction-service/commit/2b1f062ba7bc4b71067937fe432b0969e9c1f889)
- Linter tweaks [`2ea10ba`](https://github.com/DEFRA/water-abstraction-service/commit/2ea10baf276046f7c65b56384b8ca6dad8fe7459)
- Remove test notify key from travis.yml [`f08678b`](https://github.com/DEFRA/water-abstraction-service/commit/f08678b96de2d78c7fc44cd94ed190e19331fc28)
- Move codeclimate reporter id to travis environment [`db05f3e`](https://github.com/DEFRA/water-abstraction-service/commit/db05f3e97d74f57d8d18354a31810ebb76ad1911)
- Merge tag 'public_beta_1.11' into develop [`cde21a5`](https://github.com/DEFRA/water-abstraction-service/commit/cde21a5ee7d5526a3f09e61a70a7b368e99cac0f)
- Remove console.log [`b43f92a`](https://github.com/DEFRA/water-abstraction-service/commit/b43f92a34764978262fff7c0101e63f4f4f14df5)
- Fix: Uses the due date for returns due date [`b985b0e`](https://github.com/DEFRA/water-abstraction-service/commit/b985b0e751e5a97f759c6ea5c7424182735985d3)
- Merge tag 'public_beta_1.9' into develop [`9655f2d`](https://github.com/DEFRA/water-abstraction-service/commit/9655f2d897693d736fcb1e03736f960848982585)
- Merge tag 'public_beta_1.8' into develop [`80c2c41`](https://github.com/DEFRA/water-abstraction-service/commit/80c2c41b1d039ac421d79438294f41fb054cae32)
- Merge tag 'public_beta_1.6' into develop [`336c149`](https://github.com/DEFRA/water-abstraction-service/commit/336c149c4bd3e071ae0d6f0181bc085d5505fee5)
- breaking changes JWT + node 8 [`7890305`](https://github.com/DEFRA/water-abstraction-service/commit/789030585473a10e6bc08a0c6cc2a861bd2df586)
- More licences... [`5b5a51f`](https://github.com/DEFRA/water-abstraction-service/commit/5b5a51f6b23311eb207a67980216e71acdb92b35)
- Work on dummy licence creator for testing [`3e09697`](https://github.com/DEFRA/water-abstraction-service/commit/3e09697f9917287b28bfcfa67b26af408897259d)
- Tweak to lab config [`dd16cff`](https://github.com/DEFRA/water-abstraction-service/commit/dd16cff8a26e5bc3369195d5a69f98d5949c5883)
- Initial travis integration [`d740f9e`](https://github.com/DEFRA/water-abstraction-service/commit/d740f9e337b8893dc130eadcf750a55db347faaa)
- Add unit test [`07f73c8`](https://github.com/DEFRA/water-abstraction-service/commit/07f73c89209a61b5badaa569b63ad79abf11363e)
- NALD structure [`3c985fd`](https://github.com/DEFRA/water-abstraction-service/commit/3c985fd92e934362af83e02fcf962fde4a63b81a)
- Add migration to import all licences individually [`306726a`](https://github.com/DEFRA/water-abstraction-service/commit/306726a216bd02a0899f158568741ddbd2706c92)
- Fix lint errors [`307a295`](https://github.com/DEFRA/water-abstraction-service/commit/307a295539e3d4bf337deb0e9975d42a409acf56)
- Initial work on creating anonymised licence data [`fb979f0`](https://github.com/DEFRA/water-abstraction-service/commit/fb979f0121703a6dfca39dac79aa1d2cbd6b4aaa)
- Lint errors, add lint to travis CI [`e63fa26`](https://github.com/DEFRA/water-abstraction-service/commit/e63fa267a734572b6f4c57c244adca1b7a3cf29f)
- Reduced test coverage due to not calling notify API immediately - TODO: call notify via testkey to verify payload.. [`d579f81`](https://github.com/DEFRA/water-abstraction-service/commit/d579f8177bfc0bcdd728af18c1fafbcfd36b395a)
- Working dummy licence creator [`3d96a2e`](https://github.com/DEFRA/water-abstraction-service/commit/3d96a2e04d3b6ccbd6fe5ebb28cbbe496aed101d)
- Refactor data load so same code is used in test [`1250a8b`](https://github.com/DEFRA/water-abstraction-service/commit/1250a8bc945e6cd821ab9875de3ef8669ea681d0)
- Create dummy CSV directory before write [`2d5692c`](https://github.com/DEFRA/water-abstraction-service/commit/2d5692c45b6dd859af4494e0d5b93089b25b03af)
- Fix merge conflicts [`5346096`](https://github.com/DEFRA/water-abstraction-service/commit/5346096c5c1c0b6536604fb540e2bc642aa9c4f8)
- Adding licence creator classes [`1c6e8cb`](https://github.com/DEFRA/water-abstraction-service/commit/1c6e8cb9f1bc05eb05ac896dd087953d8b4aaba0)
- db migration [`e7bf5d9`](https://github.com/DEFRA/water-abstraction-service/commit/e7bf5d961b5c4ff278baa99bf8af2beba59ace4b)
- initial [`3c93f6d`](https://github.com/DEFRA/water-abstraction-service/commit/3c93f6d18c5ec5e8d028a4e64e9a26f76e468d61)
- import nald data from s3 to import schema and extract individual licence by licence id [`4ce5fb8`](https://github.com/DEFRA/water-abstraction-service/commit/4ce5fb86df295544384f6f8e5514d82d7c793b91)
- Created sessions API [`83d340f`](https://github.com/DEFRA/water-abstraction-service/commit/83d340f5b7ea5260eb65802edbbd28f15cc4c454)
- import scheduler [`45dcc13`](https://github.com/DEFRA/water-abstraction-service/commit/45dcc138ce0aa448fb8ee9ab39ec97e59f03189a)
- use node cron to post login summary to slack [`0f6cb77`](https://github.com/DEFRA/water-abstraction-service/commit/0f6cb778c38d9f86ebf0e9f510685e216cd30a4c)
- actually run the migration... [`3ff1297`](https://github.com/DEFRA/water-abstraction-service/commit/3ff1297775032ab1d0e907649e59c366351dd8d2)
- Missed the additional notify template insert [`84e85b3`](https://github.com/DEFRA/water-abstraction-service/commit/84e85b31c43082dac1cd4f5699b9260bd9b0d731)
- update import process so that the licence_start_dt and licence_end_dt fields are correctly populated [`f9c3fb8`](https://github.com/DEFRA/water-abstraction-service/commit/f9c3fb89808c91945685d9ec874a1e4347cc996b)
- Include FGAC_REGION_CODE [`35899c1`](https://github.com/DEFRA/water-abstraction-service/commit/35899c10dae016681d6e0f275e84e2797660c309)
- Added ability to schedule update to existing records (currently only reimports from import table. TODO, trigger S3 data reload too) [`a6e3245`](https://github.com/DEFRA/water-abstraction-service/commit/a6e32450c3bc86a14c412cb62cb8aec48c95e7dd)
- Modifications to anonymous data export [`819c450`](https://github.com/DEFRA/water-abstraction-service/commit/819c450fab91be3a4b47cb7d1f592b23fb9fca44)
- similar issue around purposes and points ignoring issue number and verison number [`5df794b`](https://github.com/DEFRA/water-abstraction-service/commit/5df794b6d89945014686f51912cbdd7fac95258d)
- missing packages and additional console output for debug [`28c2647`](https://github.com/DEFRA/water-abstraction-service/commit/28c26475ff635b4a27590d347a0af538c5d2d135)
- Return contact methods (i.e. phone no, email) as an array in the main query rather than causing multiple rows duplicate contacts (see water-801) [`69075e0`](https://github.com/DEFRA/water-abstraction-service/commit/69075e0650504d5cbc24e8e5c2ada5385bc5d101)
- Purge before load [`af4174d`](https://github.com/DEFRA/water-abstraction-service/commit/af4174db17c8bbc326335dd587a4ecce86b826ee)
- additional templates & less debug info [`a52cffd`](https://github.com/DEFRA/water-abstraction-service/commit/a52cffdb0caebfdc1df809db2714ed86e54f2b8f)
- Adjust river level API to return both level/flow measures (still ignoring downstream stage) [`2b232b3`](https://github.com/DEFRA/water-abstraction-service/commit/2b232b39978ce3f849b5af6d1c91f3e08460993b)
- hotfix dbmigrate [`43a4c05`](https://github.com/DEFRA/water-abstraction-service/commit/43a4c053c652dbbef299e145c90b5c7597ed618e)
- fix notification multiple send bug [`250f237`](https://github.com/DEFRA/water-abstraction-service/commit/250f237efe35b4394f1a64961c94991512a1ade0)
- hotfix bug with send query [`fc79fd2`](https://github.com/DEFRA/water-abstraction-service/commit/fc79fd29dd9f6bc9f3b4f4b80c56d730212b32a3)
- blipp and errbit [`d1b1196`](https://github.com/DEFRA/water-abstraction-service/commit/d1b11967fd6f7f91676fe61cafca7f4a023de323)
- status endpoint [`66a017e`](https://github.com/DEFRA/water-abstraction-service/commit/66a017e30f57b2f5496e64773da9d5b616c16fa8)
- blipp and errbit [`cfc66e3`](https://github.com/DEFRA/water-abstraction-service/commit/cfc66e3fc7bd233554f51ff308eabfca88e6808d)
- Handle case where exportLicence returns no data [`77b8e3e`](https://github.com/DEFRA/water-abstraction-service/commit/77b8e3eb84bfa2c1139a447e3c26c20c401e6720)
- add point detail back in... [`29f32cd`](https://github.com/DEFRA/water-abstraction-service/commit/29f32cd69d3a06a937b546b196e3f1e97a2c10ee)
- remote safeties around sending test letters... careful... [`b47e34a`](https://github.com/DEFRA/water-abstraction-service/commit/b47e34aa6ad59c0f009812f5433a88c74c606985)
- Log all view contexts to file when generating notification [`146754d`](https://github.com/DEFRA/water-abstraction-service/commit/146754d6aa84ab9389820803569ef1aa2d3f56ad)
- Tweak migrations [`2d5fe97`](https://github.com/DEFRA/water-abstraction-service/commit/2d5fe9703d9ef9543eded958eef9cd61d4ce3b94)
- Fix global variable leaks [`c4dfb1f`](https://github.com/DEFRA/water-abstraction-service/commit/c4dfb1f96a6efb7f733a6662bd32a31e56b434f7)
- fix migration issue [`a5094c2`](https://github.com/DEFRA/water-abstraction-service/commit/a5094c2a157a551eab63c4dce71b2fb2f33a534e)
- Update 20180124085613-nald-import-scheduler-up.sql [`1cd172a`](https://github.com/DEFRA/water-abstraction-service/commit/1cd172a3f9c55f05d3941651bb7ad954d67d6897)
- Add coverage path for lab tests in Travis [`45615e4`](https://github.com/DEFRA/water-abstraction-service/commit/45615e4a238e443e10894f5062510b2dbe7c67e5)
- s3 config from env [`4eab9d3`](https://github.com/DEFRA/water-abstraction-service/commit/4eab9d314ea23c78e767afa1af1ae0fcb5fe9356)
- Update nald.js [`455be03`](https://github.com/DEFRA/water-abstraction-service/commit/455be03f3c9bcd11b8c9d9b7d0f99e588a3c0325)
- Enables clustering in ecosystem file. [`34d579e`](https://github.com/DEFRA/water-abstraction-service/commit/34d579ee7735433ba79af244fd068bd19436ac9b)
- Reduce PGBoss load on DB [`9e0d1e8`](https://github.com/DEFRA/water-abstraction-service/commit/9e0d1e8497cd42749770854ec1e089a73d23f51a)
- Ignore 'payload' variable from global leak test until source found [`0fe9b2e`](https://github.com/DEFRA/water-abstraction-service/commit/0fe9b2e26ec69df73d7bc5eb0f750b7d013e3c32)
- Add comment [`10e5a90`](https://github.com/DEFRA/water-abstraction-service/commit/10e5a905f29ea0c082e637d9065fbba6ff01c111)
- Change to using subject key from task config as message title in notifications [`b7e5f62`](https://github.com/DEFRA/water-abstraction-service/commit/b7e5f62a6dbe72456392932216f61bfd8a39c582)
- Simplify travis setup [`95cf99e`](https://github.com/DEFRA/water-abstraction-service/commit/95cf99e96524f706bc4f92c0892f61eb7229bf6e)
- Adjust package files to remove git+ reference [`d351f78`](https://github.com/DEFRA/water-abstraction-service/commit/d351f78cf8cefac49cc0a1f3515f06e235a16c7d)
- Add codecov/istanbul to dev deps [`75224dd`](https://github.com/DEFRA/water-abstraction-service/commit/75224dd92c84f9ed9abd2b469687a1d3c9109658)
- Update README.MD [`027cb82`](https://github.com/DEFRA/water-abstraction-service/commit/027cb82837e585da07f338d9cf6328b44fa85ede)
- Log notification data [`94aef7b`](https://github.com/DEFRA/water-abstraction-service/commit/94aef7b211f817cf3f034a4a6fd65f3f854ee23b)
- Tweak test script for travis [`16ef8ca`](https://github.com/DEFRA/water-abstraction-service/commit/16ef8ca929b1dd9d26427c1c4b07c740b1206416)
- Try removing istanbul [`5908d7d`](https://github.com/DEFRA/water-abstraction-service/commit/5908d7d1117743a3e35eef8e43dcecc377e12805)
- Remove schema owner from migration script [`d813d12`](https://github.com/DEFRA/water-abstraction-service/commit/d813d127e39e65b302d5515d5d560096ade4720b)
- add migrate npm script [`2354120`](https://github.com/DEFRA/water-abstraction-service/commit/23541209e975cfec462e60e0a86d0f531ef8753c)
- Increase pool size [`6b7eb94`](https://github.com/DEFRA/water-abstraction-service/commit/6b7eb942fe91570c5bc39f65343cc25a3186ab32)
- Reduce pool size [`ebdf2d9`](https://github.com/DEFRA/water-abstraction-service/commit/ebdf2d9caadc0686dda03324263ea614cf261a01)
- add test notify key to travis.yml [`97b77ee`](https://github.com/DEFRA/water-abstraction-service/commit/97b77ee837b6a25210964243b9f74f7ddc41891b)
- Add build status badge [`b52e95a`](https://github.com/DEFRA/water-abstraction-service/commit/b52e95a00a26146edb03f8237204ad04665b1479)
- Comment licence numbers import [`a5f8d9f`](https://github.com/DEFRA/water-abstraction-service/commit/a5f8d9f20b5ce655e8b389d9c5bf8b44bac44071)
- Delete all tasks before import [`938933a`](https://github.com/DEFRA/water-abstraction-service/commit/938933adf276830a997675eaf57b68c4ebffbef7)
- adjust proxy settings [`78a3c1e`](https://github.com/DEFRA/water-abstraction-service/commit/78a3c1e2cb980122337b4b7c0037defcfbae5c0c)
- ID is numeric, fix validation [`c8b6a99`](https://github.com/DEFRA/water-abstraction-service/commit/c8b6a9922158fcf4d5943f40ff013e551aa5fa4a)
- Only run cron on the hour, not every minute... [`724d827`](https://github.com/DEFRA/water-abstraction-service/commit/724d82717872892e32e19d90b060874c383465d7)
- Update README.MD [`11a04b5`](https://github.com/DEFRA/water-abstraction-service/commit/11a04b5fa799ea226197f345e6e7d95cb0c606c4)
- Update README.MD [`780e77a`](https://github.com/DEFRA/water-abstraction-service/commit/780e77a46b81547c5e7b6c0065b25a7d37f5de9d)
- Update README.MD [`1380011`](https://github.com/DEFRA/water-abstraction-service/commit/1380011e69dc6c7fdbd6da0caf57f3d5c4c55172)
- Update README.MD [`2f0fe41`](https://github.com/DEFRA/water-abstraction-service/commit/2f0fe4155ffd40af53da761ac6244f0dddaf4177)
- Update README.MD [`b814477`](https://github.com/DEFRA/water-abstraction-service/commit/b8144772914ad5cd4a0fee225117a4a5bcf1350a)
- Update README.MD [`dfa1e58`](https://github.com/DEFRA/water-abstraction-service/commit/dfa1e58e6250352d7e591087e3981387042077cf)
- Update README.MD [`e41f087`](https://github.com/DEFRA/water-abstraction-service/commit/e41f0872d493f58b7cb777623483b2ab18294e2d)
- Update README.MD [`4755d3e`](https://github.com/DEFRA/water-abstraction-service/commit/4755d3e19f25612efb32a8cd237ddf111eeed0c4)
- Force change to test jenkins polling [`e87a3f9`](https://github.com/DEFRA/water-abstraction-service/commit/e87a3f904455148331daa82af19e4377e7ef26f2)
- remove role postgres from script [`b9a5ac0`](https://github.com/DEFRA/water-abstraction-service/commit/b9a5ac05f2680b19831a644f0fcb90a9f6c42b60)
- Update package.json [`ffcd926`](https://github.com/DEFRA/water-abstraction-service/commit/ffcd926d7e45b06bfebe2c195decaa5c3249f738)
- Remove console.log [`3b4a203`](https://github.com/DEFRA/water-abstraction-service/commit/3b4a203a6bfe28dc2a8615ffb544f9fc8046f2f0)
- seeing if travis error is an env issue [`4796e49`](https://github.com/DEFRA/water-abstraction-service/commit/4796e49c43f856d732e8cbd1e5cd9adf1ba701d4)
- Add notify key [`3f35f34`](https://github.com/DEFRA/water-abstraction-service/commit/3f35f34a9e4f664df699d6afbbf3801f0b2c3768)
- less logging [`d6338a7`](https://github.com/DEFRA/water-abstraction-service/commit/d6338a7ba4cc75126728fdfc623e7e61ae8faa88)
- Update 20180119122037-more-notify-templates-up.sql [`70581ca`](https://github.com/DEFRA/water-abstraction-service/commit/70581cab7c9b8a375ec49e7e4c2664fc1782dc3e)
- Update 20180119122037-more-notify-templates-up.sql [`70ee313`](https://github.com/DEFRA/water-abstraction-service/commit/70ee31340bed41580576baf13c6595e8d2767e74)
